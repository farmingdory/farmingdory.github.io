<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_nij9xt7ta2p1-5>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-5}.lst-kix_c213bk1bh6lb-2>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-2,lower-roman) ". "}.lst-kix_c213bk1bh6lb-3>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-3,decimal) ". "}.lst-kix_c213bk1bh6lb-3>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-3}.lst-kix_out9obi5jlgu-3>li{counter-increment:lst-ctn-kix_out9obi5jlgu-3}.lst-kix_c213bk1bh6lb-0>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-0,decimal) ". "}.lst-kix_c213bk1bh6lb-4>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-4,lower-latin) ". "}.lst-kix_c213bk1bh6lb-6>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-6,decimal) ". "}.lst-kix_c213bk1bh6lb-7>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-7,lower-latin) ". "}.lst-kix_c213bk1bh6lb-5>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-5,lower-roman) ". "}ol.lst-kix_nij9xt7ta2p1-7.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-7 0}ol.lst-kix_out9obi5jlgu-6.start{counter-reset:lst-ctn-kix_out9obi5jlgu-6 0}ol.lst-kix_jk2hrevisblm-0{list-style-type:none}ol.lst-kix_jk2hrevisblm-8.start{counter-reset:lst-ctn-kix_jk2hrevisblm-8 0}ol.lst-kix_jk2hrevisblm-1{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-4.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-4 0}.lst-kix_c213bk1bh6lb-8>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-8,lower-roman) ". "}.lst-kix_c213bk1bh6lb-2>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-2}ol.lst-kix_jk2hrevisblm-6{list-style-type:none}ol.lst-kix_jk2hrevisblm-7{list-style-type:none}ol.lst-kix_c213bk1bh6lb-7.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-7 0}ol.lst-kix_jk2hrevisblm-8{list-style-type:none}.lst-kix_jk2hrevisblm-8>li{counter-increment:lst-ctn-kix_jk2hrevisblm-8}ol.lst-kix_jk2hrevisblm-2{list-style-type:none}ol.lst-kix_jk2hrevisblm-3{list-style-type:none}ol.lst-kix_jk2hrevisblm-4{list-style-type:none}ol.lst-kix_jk2hrevisblm-5{list-style-type:none}ol.lst-kix_c213bk1bh6lb-2.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-2 0}ol.lst-kix_jk2hrevisblm-0.start{counter-reset:lst-ctn-kix_jk2hrevisblm-0 0}ol.lst-kix_c213bk1bh6lb-4.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-4 0}ol.lst-kix_c213bk1bh6lb-2{list-style-type:none}.lst-kix_out9obi5jlgu-1>li{counter-increment:lst-ctn-kix_out9obi5jlgu-1}ol.lst-kix_c213bk1bh6lb-3{list-style-type:none}.lst-kix_nij9xt7ta2p1-4>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-4}ol.lst-kix_c213bk1bh6lb-0{list-style-type:none}ol.lst-kix_c213bk1bh6lb-1{list-style-type:none}ol.lst-kix_c213bk1bh6lb-6{list-style-type:none}ol.lst-kix_jk2hrevisblm-3.start{counter-reset:lst-ctn-kix_jk2hrevisblm-3 0}ol.lst-kix_c213bk1bh6lb-7{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-0{list-style-type:none}ol.lst-kix_c213bk1bh6lb-4{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-1{list-style-type:none}ol.lst-kix_c213bk1bh6lb-5{list-style-type:none}.lst-kix_jk2hrevisblm-7>li{counter-increment:lst-ctn-kix_jk2hrevisblm-7}.lst-kix_out9obi5jlgu-4>li{counter-increment:lst-ctn-kix_out9obi5jlgu-4}ol.lst-kix_nij9xt7ta2p1-2{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-3{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-4{list-style-type:none}ol.lst-kix_c213bk1bh6lb-8{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-5{list-style-type:none}ol.lst-kix_nij9xt7ta2p1-6{list-style-type:none}.lst-kix_nij9xt7ta2p1-7>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-7}ol.lst-kix_nij9xt7ta2p1-7{list-style-type:none}.lst-kix_c213bk1bh6lb-1>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-1}ol.lst-kix_nij9xt7ta2p1-8{list-style-type:none}.lst-kix_c213bk1bh6lb-4>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-4}.lst-kix_c213bk1bh6lb-1>li:before{content:"" counter(lst-ctn-kix_c213bk1bh6lb-1,lower-latin) ". "}.lst-kix_out9obi5jlgu-1>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-1,lower-latin) ". "}.lst-kix_out9obi5jlgu-3>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-3,decimal) ". "}ol.lst-kix_jk2hrevisblm-6.start{counter-reset:lst-ctn-kix_jk2hrevisblm-6 0}.lst-kix_jk2hrevisblm-5>li{counter-increment:lst-ctn-kix_jk2hrevisblm-5}.lst-kix_out9obi5jlgu-2>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-2,lower-roman) ". "}.lst-kix_out9obi5jlgu-6>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-6,decimal) ". "}.lst-kix_out9obi5jlgu-7>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-7,lower-latin) ". "}.lst-kix_out9obi5jlgu-8>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-8,lower-roman) ". "}.lst-kix_out9obi5jlgu-0>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-0,decimal) ". "}ol.lst-kix_jk2hrevisblm-2.start{counter-reset:lst-ctn-kix_jk2hrevisblm-2 0}ol.lst-kix_out9obi5jlgu-4.start{counter-reset:lst-ctn-kix_out9obi5jlgu-4 0}.lst-kix_out9obi5jlgu-5>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-5,lower-roman) ". "}.lst-kix_out9obi5jlgu-4>li:before{content:"" counter(lst-ctn-kix_out9obi5jlgu-4,lower-latin) ". "}ol.lst-kix_out9obi5jlgu-3.start{counter-reset:lst-ctn-kix_out9obi5jlgu-3 0}.lst-kix_nij9xt7ta2p1-6>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-6}.lst-kix_c213bk1bh6lb-5>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-5}ol.lst-kix_jk2hrevisblm-7.start{counter-reset:lst-ctn-kix_jk2hrevisblm-7 0}.lst-kix_c213bk1bh6lb-8>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-8}.lst-kix_nij9xt7ta2p1-0>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-0}.lst-kix_out9obi5jlgu-5>li{counter-increment:lst-ctn-kix_out9obi5jlgu-5}.lst-kix_nij9xt7ta2p1-3>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-3}.lst-kix_out9obi5jlgu-2>li{counter-increment:lst-ctn-kix_out9obi5jlgu-2}ol.lst-kix_nij9xt7ta2p1-5.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-5 0}ol.lst-kix_jk2hrevisblm-1.start{counter-reset:lst-ctn-kix_jk2hrevisblm-1 0}ol.lst-kix_c213bk1bh6lb-3.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-3 0}.lst-kix_out9obi5jlgu-8>li{counter-increment:lst-ctn-kix_out9obi5jlgu-8}.lst-kix_jk2hrevisblm-2>li{counter-increment:lst-ctn-kix_jk2hrevisblm-2}ol.lst-kix_jk2hrevisblm-4.start{counter-reset:lst-ctn-kix_jk2hrevisblm-4 0}ol.lst-kix_out9obi5jlgu-2.start{counter-reset:lst-ctn-kix_out9obi5jlgu-2 0}.lst-kix_jk2hrevisblm-2>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-2,lower-roman) ". "}.lst-kix_nij9xt7ta2p1-1>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-1,lower-latin) ". "}.lst-kix_jk2hrevisblm-0>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-0,decimal) ". "}.lst-kix_jk2hrevisblm-1>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-1,lower-latin) ". "}.lst-kix_nij9xt7ta2p1-0>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-0,decimal) ". "}.lst-kix_nij9xt7ta2p1-5>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-5,lower-roman) ". "}.lst-kix_jk2hrevisblm-4>li{counter-increment:lst-ctn-kix_jk2hrevisblm-4}ol.lst-kix_out9obi5jlgu-8.start{counter-reset:lst-ctn-kix_out9obi5jlgu-8 0}.lst-kix_nij9xt7ta2p1-2>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-2,lower-roman) ". "}.lst-kix_nij9xt7ta2p1-6>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-6,decimal) ". "}.lst-kix_jk2hrevisblm-1>li{counter-increment:lst-ctn-kix_jk2hrevisblm-1}ol.lst-kix_nij9xt7ta2p1-3.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-3 0}ol.lst-kix_nij9xt7ta2p1-6.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-6 0}.lst-kix_out9obi5jlgu-7>li{counter-increment:lst-ctn-kix_out9obi5jlgu-7}.lst-kix_nij9xt7ta2p1-3>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-3,decimal) ". "}.lst-kix_jk2hrevisblm-3>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-3,decimal) ". "}.lst-kix_nij9xt7ta2p1-4>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-4,lower-latin) ". "}.lst-kix_nij9xt7ta2p1-1>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-1}.lst-kix_jk2hrevisblm-4>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-4,lower-latin) ". "}.lst-kix_jk2hrevisblm-5>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-5,lower-roman) ". "}.lst-kix_jk2hrevisblm-6>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-6,decimal) ". "}ol.lst-kix_nij9xt7ta2p1-0.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-0 0}.lst-kix_jk2hrevisblm-8>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-8,lower-roman) ". "}.lst-kix_c213bk1bh6lb-7>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-7}ol.lst-kix_c213bk1bh6lb-8.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-8 0}ol.lst-kix_out9obi5jlgu-5.start{counter-reset:lst-ctn-kix_out9obi5jlgu-5 0}.lst-kix_nij9xt7ta2p1-7>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-7,lower-latin) ". "}.lst-kix_jk2hrevisblm-7>li:before{content:"" counter(lst-ctn-kix_jk2hrevisblm-7,lower-latin) ". "}.lst-kix_nij9xt7ta2p1-8>li:before{content:"" counter(lst-ctn-kix_nij9xt7ta2p1-8,lower-roman) ". "}.lst-kix_c213bk1bh6lb-6>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-6}.lst-kix_nij9xt7ta2p1-8>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-8}.lst-kix_nij9xt7ta2p1-2>li{counter-increment:lst-ctn-kix_nij9xt7ta2p1-2}ol.lst-kix_nij9xt7ta2p1-2.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-2 0}.lst-kix_out9obi5jlgu-6>li{counter-increment:lst-ctn-kix_out9obi5jlgu-6}ol.lst-kix_c213bk1bh6lb-1.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-1 0}ol.lst-kix_out9obi5jlgu-7.start{counter-reset:lst-ctn-kix_out9obi5jlgu-7 0}ol.lst-kix_c213bk1bh6lb-5.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-5 0}.lst-kix_c213bk1bh6lb-0>li{counter-increment:lst-ctn-kix_c213bk1bh6lb-0}ol.lst-kix_out9obi5jlgu-7{list-style-type:none}ol.lst-kix_out9obi5jlgu-8{list-style-type:none}ol.lst-kix_out9obi5jlgu-5{list-style-type:none}ol.lst-kix_out9obi5jlgu-6{list-style-type:none}ol.lst-kix_out9obi5jlgu-1.start{counter-reset:lst-ctn-kix_out9obi5jlgu-1 0}ol.lst-kix_out9obi5jlgu-0{list-style-type:none}ol.lst-kix_out9obi5jlgu-3{list-style-type:none}ol.lst-kix_out9obi5jlgu-4{list-style-type:none}.lst-kix_out9obi5jlgu-0>li{counter-increment:lst-ctn-kix_out9obi5jlgu-0}ol.lst-kix_out9obi5jlgu-1{list-style-type:none}ol.lst-kix_out9obi5jlgu-2{list-style-type:none}ol.lst-kix_jk2hrevisblm-5.start{counter-reset:lst-ctn-kix_jk2hrevisblm-5 0}ol.lst-kix_nij9xt7ta2p1-1.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-1 0}ol.lst-kix_nij9xt7ta2p1-8.start{counter-reset:lst-ctn-kix_nij9xt7ta2p1-8 0}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ol.lst-kix_c213bk1bh6lb-6.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-6 0}ol.lst-kix_c213bk1bh6lb-0.start{counter-reset:lst-ctn-kix_c213bk1bh6lb-0 0}.lst-kix_jk2hrevisblm-6>li{counter-increment:lst-ctn-kix_jk2hrevisblm-6}.lst-kix_jk2hrevisblm-0>li{counter-increment:lst-ctn-kix_jk2hrevisblm-0}.lst-kix_jk2hrevisblm-3>li{counter-increment:lst-ctn-kix_jk2hrevisblm-3}ol.lst-kix_out9obi5jlgu-0.start{counter-reset:lst-ctn-kix_out9obi5jlgu-0 0}ol{margin:0;padding:0}table td,table th{padding:0}.c20{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;text-indent:12pt;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c14{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c12{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;text-indent:11pt;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c58{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c30{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c10{border-right-style:solid;padding-top:6pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.125;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c68{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c32{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-top-style:solid;margin-left:54pt;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c56{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:81pt;border-top-color:#000000;border-bottom-style:solid}.c59{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:223.5pt;border-top-color:#000000;border-bottom-style:solid}.c66{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:344.2pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:146.2pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:95.2pt;border-top-color:#000000;border-bottom-style:solid}.c78{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:102.8pt;border-top-color:#000000;border-bottom-style:solid}.c71{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:95.2pt;border-top-color:#000000;border-bottom-style:solid}.c43{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:69pt;border-top-color:#000000;border-bottom-style:solid}.c41{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:43.5pt;border-top-color:#000000;border-bottom-style:solid}.c82{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:43.5pt;border-top-color:#000000;border-bottom-style:solid}.c6{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:210pt;border-top-color:#000000;border-bottom-style:solid}.c47{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:344.2pt;border-top-color:#000000;border-bottom-style:solid}.c62{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:102.8pt;border-top-color:#000000;border-bottom-style:solid}.c85{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:48pt;border-top-color:#000000;border-bottom-style:solid}.c84{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:69pt;border-top-color:#000000;border-bottom-style:solid}.c64{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:210pt;border-top-color:#000000;border-bottom-style:solid}.c0{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:146.2pt;border-top-color:#000000;border-bottom-style:solid}.c83{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:81pt;border-top-color:#000000;border-bottom-style:solid}.c72{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:223.5pt;border-top-color:#000000;border-bottom-style:solid}.c57{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:253.5pt;border-top-color:#000000;border-bottom-style:solid}.c50{border-right-style:solid;padding:10pt 10pt 10pt 10pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:48pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:253.5pt;border-top-color:#000000;border-bottom-style:solid}.c22{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:9pt;font-family:"Times New Roman"}.c44{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:12pt;font-family:"Times New Roman"}.c13{padding-top:24pt;padding-bottom:24pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c70{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none;font-size:9pt}.c75{padding-top:48pt;padding-bottom:72pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c7{padding-top:30pt;padding-bottom:72pt;line-height:1.75;orphans:2;widows:2;text-align:left}.c1{padding-top:18pt;padding-bottom:18pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c5{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c8{padding-top:24pt;padding-bottom:42pt;line-height:1.75;orphans:2;widows:2;text-align:left}.c63{background-color:#eeeeee;color:#018c8c;font-weight:700;font-size:11.5pt;font-family:"Arial"}.c4{background-color:#eef2f6;color:#3d3b49;font-weight:400;font-size:12pt;font-family:"Courier New"}.c53{background-color:#eeeeee;color:#018c8c;font-weight:700;font-size:9pt;font-family:"Arial"}.c9{background-color:#eef2f6;color:#3d3b49;font-weight:400;font-size:11pt;font-family:"Courier New"}.c39{background-color:#eef2f6;color:#3d3b49;font-weight:700;font-size:12pt;font-family:"Courier New"}.c31{background-color:#eeeeee;color:#3d3b49;font-weight:400;font-size:11pt;font-family:"Arial"}.c26{background-color:#000000;color:#ffffff;font-weight:700;font-size:10pt;font-family:"Arial"}.c17{background-color:#ffffff;color:#3d3b49;font-weight:400;font-size:12pt;font-family:"Arial"}.c11{background-color:#eef2f6;font-size:12pt;font-family:"Courier New";color:#188038;font-weight:400}.c23{background-color:#eeeeee;font-family:"Times New Roman";color:#3d3b49;font-weight:400}.c36{color:#3d3b49;font-weight:700;font-size:14.5pt;font-family:"Times New Roman"}.c35{background-color:#eef2f6;font-family:"Courier New";color:#188038;font-weight:400}.c27{color:#188038;font-weight:400;font-size:12pt;font-family:"Courier New"}.c2{font-size:12pt;font-family:"Times New Roman";color:#3d3b49;font-weight:400}.c29{font-size:12pt;font-family:"Times New Roman";color:#3d3b49;font-weight:700}.c49{color:#3d3b49;font-weight:400;font-size:9pt;font-family:"Times New Roman"}.c60{border-spacing:0;border-collapse:collapse;margin-right:auto}.c15{color:#3d3b49;font-weight:700;font-size:23.5pt;font-family:"Times New Roman"}.c76{color:#3d3b49;font-weight:700;font-size:40.5pt}.c3{text-decoration:none;vertical-align:baseline;font-style:normal}.c38{background-color:#eeeeee;color:#3d3b49;font-weight:700}.c67{color:#3d3b49;font-weight:700;font-size:54pt}.c80{color:#000000;font-weight:400;font-family:"Arial"}.c55{font-family:"Courier New";color:#188038;font-weight:400}.c40{font-size:12pt;color:#3d3b49;font-weight:700}.c42{text-decoration:none;vertical-align:baseline}.c19{margin-right:18pt;margin-left:18pt}.c77{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c25{color:inherit;text-decoration:inherit}.c33{padding:0;margin:0}.c16{height:11pt}.c52{height:112.5pt}.c61{height:37.5pt}.c45{height:94.5pt}.c46{font-size:11pt}.c21{background-color:#ffffff}.c74{height:76.5pt}.c18{font-style:italic}.c48{height:42pt}.c51{font-family:"Times New Roman"}.c73{height:63pt}.c37{height:75.8pt}.c65{height:57pt}.c54{height:105pt}.c81{height:148.5pt}.c79{height:166.5pt}.c69{height:130.5pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c21 c77 doc-content"><h1 class="c58" id="h.cg7iz826kguj"><span class="c3 c21 c51 c67">2</span></h1><h1 class="c58" id="h.cg7iz826kguj-1"><span class="c76 c3 c21 c51">THE ANATOMY OF WEB APIS</span></h1><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 610.67px; height: 800.00px;"><img alt="" src="images/image7.png" style="width: 610.67px; height: 800.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c30 c21"><span class="c2 c3">Most of what the average user knows about a web application comes from what they can see and click in the graphical user interface (GUI) of their web browser. Under the hood, APIs perform much of the work. In particular, web APIs provide a way for applications to use the functionality and data of other applications over HTTP to feed a web application GUI with images, text, and videos.</span></p><p class="c20"><span class="c2 c3">This chapter covers common API terminology, types, data interchange formats, and authentication methods and then ties this information together with an example: observing the requests and responses exchanged during interactions with Twitter&rsquo;s API.</span></p><h2 class="c14" id="h.4dbsopk9he4g"><span class="c15 c3">How Web APIs Work</span></h2><p class="c30 c21"><span class="c2">Like web applications, web APIs rely on HTTP to facilitate a client/server relationship between the host of the API (the </span><span class="c2 c18">provider</span><span class="c2">) and the system or person making an API request (the </span><span class="c2 c18">consumer</span><span class="c2 c3">).</span></p><p class="c20"><span class="c2">An API consumer can request resources from an </span><span class="c2 c18">API endpoint</span><span class="c2 c3">, which is a URL for interacting with part of the API. Each of the following examples is a different API endpoint:</span></p><ol class="c33 lst-kix_c213bk1bh6lb-0 start" start="1"><li class="c32 c21 li-bullet-0"><span class="c2 c42 c18">https://example.com/api/v3/users/</span></li><li class="c32 c21 li-bullet-0"><span class="c2 c42 c18">https://example.com/api/v3/customers/</span></li><li class="c32 c21 li-bullet-0"><span class="c2 c42 c18">https://example.com/api/updated_on/</span></li><li class="c32 c21 li-bullet-0"><span class="c2 c42 c18">https://example.com/api/state/1/</span></li></ol><p class="c20"><span class="c2 c18">Resources</span><span class="c2">&nbsp;are the data being requested. A </span><span class="c2 c18">singleton </span><span class="c2">resource is a unique object, such as </span><span class="c2 c18">/api/user/{user_id}</span><span class="c2">. A </span><span class="c2 c18">collection</span><span class="c2">&nbsp;is a group of resources, such as </span><span class="c2 c18">/api/profiles/users</span><span class="c2">. A </span><span class="c2 c18">subcollection </span><span class="c2">refers to a collection within a particular resource. For example, </span><span class="c2 c18">/api/user/{user_id}/settings</span><span class="c2">&nbsp;is the endpoint to access the </span><span class="c2 c18">settings</span><span class="c2 c3">&nbsp;subcollection of a specific (singleton) user.</span></p><p class="c20"><span class="c2">When a consumer requests a resource from a provider, the request passes through an </span><span class="c2 c18">API gateway</span><span class="c2">, which is an API management component that acts as an entry point to a web application. For example, as shown in </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23figure2-1&amp;sa=D&amp;source=editors&amp;ust=1681144414045272&amp;usg=AOvVaw2g1IyADWyDF_iMEIoNYhcw">Figure 2-1</a></span><span class="c2 c3">, end users can access an application&rsquo;s services using a plethora of devices, which are all filtered through an API gateway. The API gateway then distributes the requests to whichever microservice is needed to fulfill each request.</span></p><p class="c20"><span class="c2 c3">The API gateway filters bad requests, monitors incoming traffic, and routes each request to the proper service or microservice. The API gateway can also handle security controls such as authentication, authorization, encryption in transit using SSL, rate limiting, and load balancing.</span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 378.67px;"><img alt="Diagram showing an API gateway in the center, apps on the left-hand side, and microservices on the right-hand side. Arrows travel from the mobile app, web app, and IoT app to the API gateway, and from the API gateway to Microservice 1, Microservice 2, and Microservice 3." src="images/image4.png" style="width: 624.00px; height: 378.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c22 c21 c18">Figure 2-1</span><span class="c49 c42 c21 c18">: A sample microservices architecture and API gateway</span></p><p class="c20"><span class="c2">A </span><span class="c2 c18">microservice </span><span class="c2 c3">is a modular piece of a web app that handles a specific function. Microservices use APIs to transfer data and trigger actions. For example, a web application with a payment gateway may have several different features on a single web page: a billing feature, a feature that logs customer account information, and one that emails receipts upon purchase. The application&rsquo;s backend design could be monolithic, meaning all the services exist within a single application, or it could have a microservice architecture, where each service functions as its own standalone application.</span></p><p class="c20"><span class="c2">The API consumer does not see the backend design, only the endpoints they can interact with and the resources they can access. These are spelled out in the API </span><span class="c2 c18">contract</span><span class="c2 c3">, which is human-readable documentation that describes how to use the API and how you can expect it to behave. API documentation differs from one organization to another but often includes a description of authentication requirements, user permission levels, API endpoints, and the required request parameters. It might also include usage examples. From an API hacker&rsquo;s perspective, the documentation can reveal which endpoints to call for customer data, which API keys you need in order to become an administrator, and even business logic flaws.</span></p><p class="c20"><span class="c2">In the following box, the GitHub API documentation for the </span><span class="c2 c18">/applications/{client_id}/grants/{access_token}</span><span class="c2">&nbsp;endpoint, taken from </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://docs.github.com/en/rest/reference/apps&amp;sa=D&amp;source=editors&amp;ust=1681144414046389&amp;usg=AOvVaw2OwnK_7CjLT4UIC20y-_q0">https://docs.github.com/en/rest/reference/apps</a></span><span class="c2 c3">, is an example of quality documentation.</span></p><h2 class="c68" id="h.1gxx75dvwftb"><span class="c63 c3">REVOKE A GRANT FOR AN APPLICATION</span></h2><p class="c30"><span class="c23 c3 c46">OAuth application owners can revoke a grant for their OAuth application and a specific user.</span></p><p class="c12 c19"><span class="c38 c18 c51">DELETE</span><span class="c23 c18">&nbsp;</span><span class="c35 c42 c46 c18">/applications/{client_id}/grants/{access_token}</span></p><h3 class="c68" id="h.cuy679y4dhfi"><span class="c3 c53">PARAMETERS</span></h3><a id="t.52c76f13c93f6aefcfddb7fa831d3d382898d33d"></a><a id="t.0"></a><table class="c60"><tr class="c61"><td class="c21 c71" colspan="1" rowspan="1"><p class="c7"><span class="c38">Name</span></p></td><td class="c21 c82" colspan="1" rowspan="1"><p class="c7"><span class="c38">Type</span></p></td><td class="c21 c85" colspan="1" rowspan="1"><p class="c7"><span class="c38">In</span></p></td><td class="c21 c72" colspan="1" rowspan="1"><p class="c7"><span class="c38">Description</span></p></td></tr><tr class="c37"><td class="c21 c34" colspan="1" rowspan="1"><p class="c7"><span class="c35">accept</span></p></td><td class="c41 c21" colspan="1" rowspan="1"><p class="c7"><span class="c23">string</span></p></td><td class="c50 c21" colspan="1" rowspan="1"><p class="c7"><span class="c23">header</span></p></td><td class="c59 c21" colspan="1" rowspan="1"><p class="c7"><span class="c23">Setting to </span><span class="c35">application/vnd.github.v3+json</span><span class="c23">&nbsp;is recommended.</span></p></td></tr><tr class="c61"><td class="c34 c21" colspan="1" rowspan="1"><p class="c7"><span class="c21 c55">client_id</span></p></td><td class="c41 c21" colspan="1" rowspan="1"><p class="c7"><span class="c23">string</span></p></td><td class="c21 c50" colspan="1" rowspan="1"><p class="c7"><span class="c23">path</span></p></td><td class="c59 c21" colspan="1" rowspan="1"><p class="c7"><span class="c23">The client ID of your GitHub app.</span></p></td></tr><tr class="c65"><td class="c34 c21" colspan="1" rowspan="1"><p class="c7"><span class="c35">access_token</span></p></td><td class="c21 c41" colspan="1" rowspan="1"><p class="c7"><span class="c23">string</span></p></td><td class="c50 c21" colspan="1" rowspan="1"><p class="c7"><span class="c23">body</span></p></td><td class="c21 c59" colspan="1" rowspan="1"><p class="c7"><span class="c23">Required. The OAuth access token used to authenticate to the GitHub API.</span></p></td></tr></table><p class="c20"><span class="c2">The documentation for this endpoint includes the description of the purpose of the API request, the HTTP request method to use when interacting with the API endpoint, and the endpoint itself, </span><span class="c2 c18">/applications</span><span class="c2 c3">, followed by variables.</span></p><p class="c20"><span class="c2">The acronym</span><span class="c2 c18">&nbsp;CRUD</span><span class="c2">, which stands for </span><span class="c2 c18">Create, Read, Update, Delete</span><span class="c2">, describes the primary actions and methods used to interact with APIs. </span><span class="c2 c18">Create</span><span class="c2">&nbsp;is the process of making new records, accomplished through a POST request. </span><span class="c2 c18">Read</span><span class="c2">&nbsp;is data retrieval, done through a GET request. </span><span class="c2 c18">Update</span><span class="c2">&nbsp;is how currently existing records are modified without being overwritten and is accomplished with POST or PUT requests. </span><span class="c2 c18">Delete</span><span class="c2 c3">&nbsp;is the process of erasing records, which can be done with POST or DELETE, as shown in this example. Note that CRUD is a best practice only, and developers may implement their APIs in other ways. Therefore, when you learn to hack APIs later on, we&rsquo;ll test beyond the CRUD methods.</span></p><p class="c20"><span class="c2">By convention, curly brackets mean that a given variable is necessary within the path parameters. The </span><span class="c2 c18">{client_id}</span><span class="c2">&nbsp;variable must be replaced with an actual client&rsquo;s ID, and the </span><span class="c2 c18">{access_token}</span><span class="c2">&nbsp;variable must be replaced with your own access token. Tokens are what API providers use to identify and authorize requests to approved API consumers. Other API documentation might use a colon or square brackets to signify a variable (for example, </span><span class="c2 c18">/api/v2/:customers/</span><span class="c2">&nbsp;or </span><span class="c2 c18">/api/:collection/:client_id</span><span class="c2 c3">).</span></p><p class="c20"><span class="c2 c3">The &ldquo;Parameters&rdquo; section lays out the authentication and authorization requirements to perform the described actions, including the name of each parameter value, the type of data to provide, where to include the data, and a description of the parameter value.</span></p><h2 class="c14" id="h.v36f1aosseil"><span class="c15 c3">Standard Web API Types</span></h2><p class="c30 c21"><span class="c2 c3">APIs come in standard types, each of which varies in its rules, functions, and purpose. Typically, a given API will use only one type, but you may encounter endpoints that don&rsquo;t match the format and structure of the others or don&rsquo;t match a standard type at all. Being able to recognize typical and atypical APIs will help you know what to expect and test for as an API hacker. Remember, most public APIs are designed to be self-service, so a given API provider will often let you know the type of API you&rsquo;ll be interacting with.</span></p><p class="c20"><span class="c2 c3">This section describes the two primary API types we&rsquo;ll focus on throughout this book: RESTful APIs and GraphQL. Later parts of the book, as well as the book&rsquo;s labs, cover attacks against RESTful APIs and GraphQL only.</span></p><h3 class="c14" id="h.n5ucdfujry8k"><span class="c36 c3">RESTful APIs</span></h3><p class="c30 c21"><span class="c2 c18">Representational State Transfer (REST)</span><span class="c2">&nbsp;is a set of architectural constraints for applications that communicate using HTTP methods. APIs that use REST constraints are called </span><span class="c2 c18">RESTful</span><span class="c2 c3">&nbsp;(or just REST) APIs.</span></p><p class="c20"><span class="c2 c3">REST was designed to improve upon many of the inefficiencies of other older APIs, such as Simple Object Access Protocol (SOAP). For example, it relies entirely on the use of HTTP, which makes it much more approachable to end users. REST APIs primarily use the HTTP methods GET, POST, PUT, and DELETE to accomplish CRUD (as described in the section &ldquo;How Web APIs Work&rdquo;).</span></p><p class="c20"><span class="c2 c3">RESTful design depends on six constraints. These constraints are &ldquo;shoulds&rdquo; instead of &ldquo;musts,&rdquo; reflecting the fact that REST is essentially a set of guidelines for an HTTP resource-based architecture:</span></p><ol class="c33 lst-kix_out9obi5jlgu-0 start" start="1"><li class="c32 c21 li-bullet-0"><span class="c29">Uniform interface:</span><span class="c2 c3">&nbsp;REST APIs should have a uniform interface. In other words, the requesting client device should not matter; a mobile device, an IoT (internet of things) device, and a laptop must all be able to access a server in the same way.</span></li><li class="c32 c21 li-bullet-0"><span class="c29">Client/server:</span><span class="c2 c3">&nbsp;REST APIs should have a client/server architecture. Clients are the consumers requesting information, and servers are the providers of that information.</span></li><li class="c32 c21 li-bullet-0"><span class="c29">Stateless:</span><span class="c2 c3">&nbsp;REST APIs should not require stateful communications. REST APIs do not maintain state during communication; it is as though each request is the first one received by the server. The consumer will therefore need to supply everything the provider will need in order to act upon the request. This has the benefit of saving the provider from having to remember the consumer from one request to another. Consumers often provide tokens to create a state-like experience.</span></li><li class="c32 c21 li-bullet-0"><span class="c29">Cacheable:</span><span class="c2">&nbsp;The response from the REST API provider should indicate whether the response is cacheable. </span><span class="c2 c18">Caching</span><span class="c2 c3">&nbsp;is a method of increasing request throughput by storing commonly requested data on the client side or in a server cache. When a request is made, the client will first check its local storage for the requested information. If it doesn&rsquo;t find the information, it passes the request to the server, which checks its local storage for the requested information. If the data is not there either, the request could be passed to other servers, such as database servers, where the data can be retrieved.<br>As you might imagine, if the data is stored on the client, the client can immediately retrieve the requested data at little to no processing cost to the server. This also applies if the server has cached a request. The further down the chain a request has to go to retrieve data, the higher the resource cost and the longer it takes. Making REST APIs cacheable by default is a way to improve overall REST performance and scalability by decreasing response times and server processing power. APIs usually manage caching with the use of headers that explain when the requested information will expire from the cache.</span></li><li class="c32 c21 li-bullet-0"><span class="c29">Layered system:</span><span class="c2 c3">&nbsp;The client should be able to request data from an endpoint without knowing about the underlying server architecture.</span></li><li class="c32 c21 li-bullet-0"><span class="c29">Code on demand (optional):</span><span class="c2 c3">&nbsp;Allows for code to be sent to the client for execution.</span></li></ol><p class="c20"><span class="c2 c3">REST is a style rather than a protocol, so each RESTful API may be different. It may have methods enabled beyond CRUD, its own sets of authentication requirements, subdomains instead of paths for endpoints, different rate-limit requirements, and so on. Furthermore, developers or an organization may call their API &ldquo;RESTful&rdquo; without adhering to the standard, which means you can&rsquo;t expect every API you come across to meet all the REST constraints.</span></p><p class="c20"><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23listing2-1&amp;sa=D&amp;source=editors&amp;ust=1681144414055106&amp;usg=AOvVaw0c_BqoM4g35pWajB0IOxwo">Listing 2-1</a></span><span class="c2">&nbsp;shows a fairly typical REST API GET request used to find out how many pillows are in a store&rsquo;s inventory. </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23listing2-2&amp;sa=D&amp;source=editors&amp;ust=1681144414055407&amp;usg=AOvVaw0GTV_ovI-NWfve8ZurapCD">Listing 2-2</a></span><span class="c2 c3">&nbsp;shows the provider&rsquo;s response.</span></p><p class="c5"><span class="c4 c3">GET /api/v3/inventory/item/pillow HTTP/1.1</span></p><p class="c5"><span class="c4 c3">HOST: rest-shop.com</span></p><p class="c5"><span class="c4 c3">User-Agent: Mozilla/5.0</span></p><p class="c1"><span class="c4 c3">Accept: application/json</span></p><p class="c30 c21"><span class="c44 c18">Listing 2-1</span><span class="c2 c42 c18">: A sample RESTful API request</span></p><p class="c5"><span class="c4 c3">HTTP/1.1 200 OK</span></p><p class="c5"><span class="c4 c3">Server: RESTfulServer/0.1</span></p><p class="c5"><span class="c4 c3">Cache-Control: no-store</span></p><p class="c5"><span class="c4 c3">Content-Type: application/json</span></p><p class="c5 c16"><span class="c4 c3"></span></p><p class="c5"><span class="c4 c3">{</span></p><p class="c5"><span class="c4 c3">&quot;item&quot;: {</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &quot;id&quot;: &quot;00101&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &quot;name&quot;: &quot;pillow&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &quot;count&quot;: 25</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &quot;price&quot;: {</span></p><p class="c5"><span class="c4 c3">&quot;currency&quot;: &quot;USD&quot;,</span></p><p class="c5"><span class="c4 c3">&quot;value&quot;: &quot;19.99&quot;</span></p><p class="c5"><span class="c4 c3">}</span></p><p class="c5"><span class="c4 c3">&nbsp; },</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c30 c21"><span class="c44 c18">Listing 2-2</span><span class="c2 c42 c18">: A sample RESTful API response</span></p><p class="c20"><span class="c2 c3">This REST API request is just an HTTP GET request to the specified URL. In this case, the request queries the store&rsquo;s inventory for pillows. The provider responds with JSON indicating the item&rsquo;s ID, name, and quantity of items in stock. If there was an error in the request, the provider would respond with an HTTP error code in the 400 range indicating what went wrong.</span></p><p class="c20"><span class="c2">One thing to note: the </span><span class="c2 c18">rest-shop.com</span><span class="c2 c3">&nbsp;store provided all the information it had about the resource &ldquo;pillow&rdquo; in its response. If the consumer&rsquo;s application only needed the name and value of the pillow, the consumer would need to filter out the additional information. The amount of information sent back to a consumer completely depends on how the API provider has programmed its API.</span></p><p class="c20"><span class="c2 c3">REST APIs have some common headers you should become familiar with. These are identical to HTTP headers but are more commonly seen in REST API requests than in other API types, so they can help you identify REST APIs. (Headers, naming conventions, and the data interchange format used are normally the best indicators of an API&rsquo;s type.) The following subsections detail some of the common REST API headers you will come across.</span></p><h4 class="c14" id="h.eekyd327m4v2"><span class="c29 c3">Authorization</span></h4><p class="c30 c21"><span class="c11">Authorization</span><span class="c2">&nbsp;headers are used to pass a token or credentials to the API provider. The format of these headers is </span><span class="c11">Authorization: &lt;type&gt; &lt;token/credentials&gt;</span><span class="c2 c3">. For example, take a look at the following authorization header:</span></p><p class="c1"><span class="c4 c3">Authorization: Bearer Ab4dtok3n</span></p><p class="c20"><span class="c2">There are different authorization types</span><span class="c2 c18">. </span><span class="c11">Basic</span><span class="c2">&nbsp;uses base64-encoded credentials.</span><span class="c2 c18">&nbsp;</span><span class="c11">Bearer</span><span class="c2 c18">&nbsp;</span><span class="c2">uses an API token. Finally,</span><span class="c2 c18">&nbsp;</span><span class="c11">AWS-HMAC-SHA256</span><span class="c2 c3">&nbsp;is an AWS authorization type that uses an access key and a secret key.</span></p><h4 class="c14" id="h.8ogjnl4pygo1"><span class="c29 c3">Content Type</span></h4><p class="c30 c21"><span class="c11">Content-Type</span><span class="c2">&nbsp;headers are used to indicate the type of media being transferred. These headers differ from </span><span class="c11">Accept</span><span class="c2">&nbsp;headers, which state the media type you want to receive; </span><span class="c11">Content-Type</span><span class="c2 c3">&nbsp;headers describe the media you&rsquo;re sending.</span></p><p class="c20"><span class="c2">Here are some common </span><span class="c11">Content-Type</span><span class="c29">&nbsp;</span><span class="c2 c3">headers for REST APIs:</span></p><ol class="c33 lst-kix_jk2hrevisblm-0 start" start="1"><li class="c32 c21 li-bullet-0"><span class="c11">application/json</span><span class="c2 c3">&nbsp;Used to specify JavaScript Object Notation (JSON) as a media type. JSON is the most common media type for REST APIs.</span></li><li class="c32 c21 li-bullet-0"><span class="c11">application/xml</span><span class="c2 c3">&nbsp;Used to specify XML as a media type.</span></li><li class="c21 c32 li-bullet-0"><span class="c11">application/x-www-form-urlencoded</span><span class="c2">&nbsp;A format in which the values being sent are encoded and separated by an ampersand (</span><span class="c11">&amp;</span><span class="c2">), and an equal sign (</span><span class="c11">=</span><span class="c2 c3">) is used between key/value pairs.</span></li></ol><h4 class="c14" id="h.vx2o5zvff85s"><span class="c29 c3">Middleware (X) Headers</span></h4><p class="c30 c21"><span class="c11">X-&lt;anything&gt;</span><span class="c2">&nbsp;headers are known as </span><span class="c2 c18">middleware headers</span><span class="c2">&nbsp;and can serve all sorts of purposes. They are fairly common outside of API requests as well. </span><span class="c11">X-Response-Time</span><span class="c2">&nbsp;can be used as an API response to indicate how long a response took to process. </span><span class="c11">X-API-Key</span><span class="c2">&nbsp;can be used as an authorization header for API keys. </span><span class="c11">X-Powered-By</span><span class="c2">&nbsp;can be used to provide additional information about backend services. </span><span class="c11">X-Rate-Limit</span><span class="c2">&nbsp;can be used to tell the consumer how many requests they can make within a given time frame. </span><span class="c11">X-RateLimit-Remaining</span><span class="c2">&nbsp;can tell a consumer how many requests remain before they violate rate-limit enforcement. (There are many more, but you get the idea.) </span><span class="c11">X-&lt;anything&gt;</span><span class="c2 c3">&nbsp;middleware headers can provide a lot of useful information to API consumers and hackers alike.</span></p><h2 class="c68" id="h.z7tucqeo04l"><span class="c63 c3">ENCODING DATA</span></h2><p class="c30"><span class="c23">As we touched upon in Chapter 1, HTTP requests use encoding as a method to ensure that communications are handled properly. Various characters that can be problematic for the technologies used by the server are known as </span><span class="c23 c18">bad characters</span><span class="c23 c3 c46">. One way of handling bad characters is to use an encoding scheme that formats the message in such a way as to remove them. Common encoding schemes include Unicode encoding, HTML encoding, URL encoding, and base64 encoding. XML typically uses one of two forms of Unicode encoding: UTF-8 or UTF-16.</span></p><p class="c12"><span class="c23 c3 c46">When the string &ldquo;hAPI hacker&rdquo; is encoded in UTF-8, it becomes the following:</span></p><p class="c12 c19"><span class="c23 c42 c46 c18">\x68\x41\x50\x49\x20\x68\x61\x63\x6B\x65\x72</span></p><p class="c12"><span class="c23 c3 c46">Here is the UTF-16 version of the string:</span></p><p class="c12 c19"><span class="c23 c42 c46 c18">\u{68}\u{41}\u{50}\u{49}\u{20}\u{68}\u{61}\u{63}\u{6b}\u{65}\u{72}</span></p><p class="c12"><span class="c23 c3 c46">Finally, here is the base64-encoded version:</span></p><p class="c12 c19"><span class="c23 c42 c46 c18">aEFQSSBoYWNrZXI=</span></p><p class="c12"><span class="c23 c3 c46">Recognizing these encoding schemes will be useful as you begin examining requests and responses and encounter encoded data.</span></p><h3 class="c14" id="h.cgk4dzxb5c7o"><span class="c36 c3">GraphQL</span></h3><p class="c30 c21"><span class="c2">Short for </span><span class="c2 c18">Graph Query Language</span><span class="c2">, </span><span class="c2 c18">GraphQL </span><span class="c2">is a specification for APIs that allow clients to define the structure of the data they want to request from the server. GraphQL is RESTful, as it follows the six constraints of REST APIs. However, GraphQL also takes the approach of being </span><span class="c2 c18">query-centric</span><span class="c2 c3">, because it is structured to function similarly to a database query language like Structured Query Language (SQL).</span></p><p class="c20"><span class="c2 c3">As you might gather from the specification&rsquo;s name, GraphQL stores the resources in a graph data structure. To access a GraphQL API, you&rsquo;ll typically access the URL where it is hosted and submit an authorized request that contains query parameters as the body of a POST request, similar to the following:</span></p><p class="c5"><span class="c4 c3">query {</span></p><p class="c5"><span class="c4 c3">&nbsp; users {</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; username</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; id</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; email</span></p><p class="c5"><span class="c4 c3">&nbsp; }</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c20"><span class="c2 c3">In the right context, this query would provide you with the usernames, IDs, and emails of the requested resources. A GraphQL response to this query would look like the following:</span></p><p class="c5"><span class="c4 c3">{</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;data&quot;: {</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &quot;users&quot;: {</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &nbsp; &quot;username&quot;: &quot;hapi_hacker&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &nbsp; &quot;id&quot;: 1111,</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &nbsp; &quot;email&quot;: &quot;hapihacker@email.com&quot;</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; }</span></p><p class="c5"><span class="c4 c3">&nbsp; }</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c20"><span class="c2 c3">GraphQL improves on typical REST APIs in several ways. Since REST APIs are resource based, there will likely be instances when a consumer needs to make several requests in order to get all the data they need. On the other hand, if a consumer only needs a specific value from the API provider, the consumer will need to filter out the excess data. With GraphQL, a consumer can use a single request to get the exact data they want. That&rsquo;s because, unlike REST APIs, where clients receive whatever data the server is programmed to return from an endpoint, including the data they don&rsquo;t need, GraphQL APIs let clients request specific fields from a resource.</span></p><p class="c20"><span class="c2">GraphQL also uses HTTP, but it typically depends on a single entry point (URL) using the POST method. In a GraphQL request, the body of the POST request is what the provider processes. For example, take a look at the GraphQL request in </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23listing2-3&amp;sa=D&amp;source=editors&amp;ust=1681144414062372&amp;usg=AOvVaw1FDWDDrT0NrLnMvU3hNOU1">Listing 2-3</a></span><span class="c2">&nbsp;and the response in </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23listing2-4&amp;sa=D&amp;source=editors&amp;ust=1681144414062634&amp;usg=AOvVaw31Tmj96O_UNaquZlllOEj_">Listing 2-4</a></span><span class="c2 c3">, depicting a request to check a store&rsquo;s inventory for graphics cards.</span></p><p class="c5"><span class="c4 c3">POST /graphql HTTP/1.1</span></p><p class="c5"><span class="c4 c3">HOST: graphql-shop.com</span></p><p class="c5"><span class="c4 c3">Authorization: Bearer ab4dt0k3n</span></p><p class="c5 c16"><span class="c4 c3"></span></p><p class="c5"><span class="c4 c3">{query&#10102; {</span></p><p class="c5"><span class="c4 c3">&nbsp; inventory&#10103; (item:&quot;Graphics Card&quot;, id: 00101) {</span></p><p class="c5"><span class="c4 c3">name</span></p><p class="c5"><span class="c4 c3">fields&#10104;{</span></p><p class="c5"><span class="c4 c3">price</span></p><p class="c5"><span class="c4 c3">quantity} } }</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c30 c21"><span class="c18 c44">Listing 2-3</span><span class="c2 c42 c18">: An example GraphQL request</span></p><p class="c5"><span class="c4 c3">HTTP/1.1 200 OK</span></p><p class="c5"><span class="c4 c3">Content-Type: application/json</span></p><p class="c5"><span class="c4 c3">Server: GraphqlServer</span></p><p class="c5 c16"><span class="c4 c3"></span></p><p class="c5"><span class="c4 c3">{</span></p><p class="c5"><span class="c4 c3">&quot;data&quot;: { </span></p><p class="c5"><span class="c4 c3">&quot;inventory&quot;: { &quot;name&quot;: &quot;Graphics Card&quot;,</span></p><p class="c5"><span class="c4 c3">&quot;fields&quot;:&#10105;[</span></p><p class="c5"><span class="c4 c3">{</span></p><p class="c5"><span class="c4 c3">&quot;price&quot;:&quot;999.99&quot;</span></p><p class="c5"><span class="c4 c3">&quot;quantity&quot;: 25 } ] } }</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c30 c21"><span class="c44 c18">Listing 2-4</span><span class="c2 c42 c18">: An example GraphQL response</span></p><p class="c20"><span class="c2">As you can see, a query payload in the body specifies the information needed. The GraphQL request body begins with the query operation &#10102;, which is the equivalent of a GET request and used to obtain information from the API. The GraphQL node we are querying for, </span><span class="c11">&quot;inventory&quot;</span><span class="c2 c3">&nbsp;&#10103;, is also known as the root query type. Nodes, similar to objects, are made up of fields &#10104;, similar to key/value pairs in REST. The main difference here is that we can specify the exact fields we are looking for. In this example, we are looking for the &ldquo;price&rdquo; and &ldquo;quantity&rdquo; fields. Finally, you can see that the GraphQL response only provided the requested fields for the specified graphics card &#10105;. Instead of getting the item ID, item name, and other superfluous information, the query resolved with only the fields that were needed.</span></p><p class="c20"><span class="c2 c3">If this had been a REST API, it might have been necessary to send requests to different endpoints to get the quantity and then the brand of the graphics card, but with GraphQL you can build out a query for the specific information you are looking for from a single endpoint.</span></p><p class="c20"><span class="c2">GraphQL still functions using CRUD, which may sound confusing at first since it relies on POST requests. However, GraphQL uses three operations within the POST request to interact with GraphQL APIs: query, mutation, and subscription. </span><span class="c2 c18">Query</span><span class="c2">&nbsp;is an operation to retrieve data (read). </span><span class="c2 c18">Mutation</span><span class="c2">&nbsp;is an operation used to submit and write data (create, update, and delete). </span><span class="c2 c18">Subscription</span><span class="c2 c3">&nbsp;is an operation used to send data (read) when an event occurs. Subscription is a way for GraphQL clients to listen to live updates from the server.</span></p><p class="c20"><span class="c2">GraphQL uses </span><span class="c2 c18">schemas</span><span class="c2 c3">, which are collections of the data that can be queried with the given service. Having access to the GraphQL schema is similar to having access to a REST API collection. A GraphQL schema will provide you with the information you&rsquo;ll need in order to query the API.</span></p><p class="c20"><span class="c2">You can interact with GraphQL using a browser if there is a GraphQL IDE, like GraphiQL, in place (see </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23figure2-2&amp;sa=D&amp;source=editors&amp;ust=1681144414065431&amp;usg=AOvVaw2glb2Lp0gaFlbDT5Qg1Twl">Figure 2-2</a></span><span class="c2 c3">).</span></p><p class="c20"><span class="c2 c3">Otherwise, you&rsquo;ll need a GraphQL client such as Postman, Apollo-Client, GraphQL-Request, GraphQL-CLI, or GraphQL-Compose. In later chapters, we&rsquo;ll use Postman as our GraphQL client.</span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 217.33px;"><img alt="Screenshot of an interface with two windows: a left-hand window in which you can type GraphQL queries, and a right-hand window that populates with information about the GraphQL schema" src="images/image1.png" style="width: 624.00px; height: 217.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c22 c21 c18">Figure 2-2</span><span class="c49 c42 c21 c18">: The GraphiQL interface for GitHub</span></p><h2 class="c68" id="h.ylw0n9t3mwqe"><span class="c3 c63">SOAP: AN ACTION-ORIENTED API FORMAT</span></h2><p class="c30"><span class="c23 c18">Simple Object Access Protocol (SOAP)</span><span class="c23 c3 c46">&nbsp;is a type of action-oriented API that relies on XML. SOAP is one of the older web APIs, originally released as XML-RPC back in the late 1990s, so we won&rsquo;t cover it in this book.</span></p><p class="c12"><span class="c23 c3 c46">Although SOAP works over HTTP, SMTP, TCP, and UDP, it was primarily designed for use over HTTP. When SOAP is used over HTTP, the requests are all made using HTTP POST. For example, take a look at the following sample SOAP request:</span></p><p class="c5"><span class="c9 c3">POST /Inventory HTTP/1.1</span></p><p class="c5"><span class="c9 c3">Host: www.soap-shop.com</span></p><p class="c5"><span class="c9 c3">Content-Type: application/soap+xml; charset=utf-8</span></p><p class="c5"><span class="c9 c3">Content-Length: nnn</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c5"><span class="c9 c3">&lt;?xml version=&quot;1.0&quot;?&gt;</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c5"><span class="c9 c3">&#10102;&lt;soap:Envelope</span></p><p class="c5"><span class="c9 c3">&#10103;xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope/&quot;</span></p><p class="c5"><span class="c9 c3">soap:encodingStyle=&quot;http://www.w3.org/2003/05/soap-encoding&quot;&gt;</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c5"><span class="c9 c3">&#10104;&lt;soap:Body xmlns:m=&quot;http://www.soap-shop.com/inventory&quot;&gt;</span></p><p class="c5"><span class="c9 c3">&nbsp; &lt;m:GetInventoryPrice&gt;</span></p><p class="c5"><span class="c9 c3">&nbsp; &nbsp; &lt;m:InventoryName&gt;ThebestSOAP&lt;/m:InventoryName&gt;</span></p><p class="c5"><span class="c9 c3">&nbsp; &lt;/m:GetInventoryPrice&gt;</span></p><p class="c5"><span class="c3 c9">&lt;/soap:Body&gt;</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c75"><span class="c9 c3">&lt;/soap:Envelope&gt;</span></p><p class="c12"><span class="c23 c3 c46">The corresponding SOAP response looks like this:</span></p><p class="c5"><span class="c9 c3">HTTP/1.1 200 OK</span></p><p class="c5"><span class="c9 c3">Content-Type: application/soap+xml; charset=utf-8</span></p><p class="c5"><span class="c9 c3">Content-Length: nnn</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c5"><span class="c9 c3">&lt;?xml version=&quot;1.0&quot;?&gt;</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c5"><span class="c9 c3">&lt;soap:Envelope</span></p><p class="c5"><span class="c9 c3">xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope/&quot;</span></p><p class="c5"><span class="c9 c3">soap:encodingStyle=&quot;http://www.w3.org/2003/05/soap-encoding&quot;&gt;</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c5"><span class="c9 c3">&lt;soap:Body xmlns:m=&quot;http://www.soap-shop.com/inventory&quot;&gt;</span></p><p class="c5"><span class="c9 c3">&#10105;&lt;soap:Fault&gt;</span></p><p class="c5"><span class="c9 c3">&lt;faultcode&gt;soap:VersionMismatch&lt;/faultcode&gt;</span></p><p class="c5"><span class="c9 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;faultstring, xml:lang=&#39;en&quot;&gt;</span></p><p class="c5"><span class="c9 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name does not match Inventory record</span></p><p class="c5"><span class="c9 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/faultstring&gt;</span></p><p class="c5"><span class="c9 c3">&lt;/soap:Fault&gt;</span></p><p class="c5"><span class="c9 c3">&lt;/soap:Body&gt;</span></p><p class="c5 c16"><span class="c9 c3"></span></p><p class="c75"><span class="c9 c3">&lt;/soap:Envelope&gt;</span></p><p class="c12"><span class="c23">SOAP API messages are made up of four parts: the envelope &#10102; and header &#10103;, which are necessary, and the body &#10104; and fault &#10105;, which are optional. The </span><span class="c23 c18">envelope</span><span class="c23">&nbsp;is an XML tag at the beginning of a message that signifies that the message is a SOAP message. The </span><span class="c23 c18">header</span><span class="c23">&nbsp;can be used to process a message; in this example, the </span><span class="c35">Content-Type</span><span class="c23">&nbsp;request header lets the SOAP provider know the type of content being sent in the POST request (</span><span class="c35">application/soap+xml</span><span class="c23">). Since APIs facilitate machine-to-machine communication, headers essentially form an agreement between the consumer and the provider concerning the expectations within the request. Headers are a way to ensure that the consumer and provider understand one another and are speaking the same language. The </span><span class="c23 c18">body</span><span class="c23">&nbsp;is the primary payload of the XML message, meaning it contains the data sent to the application. The </span><span class="c23 c18">fault</span><span class="c23 c3 c46">&nbsp;is an optional part of a SOAP response that can be used to provide error messaging.</span></p><h2 class="c14" id="h.woj5lg8ivs4c"><span class="c15 c3">REST API Specifications</span></h2><p class="c30 c21"><span class="c2">The variety of REST APIs has left room for other tools and standardizations to fill in some of the gaps.</span><span class="c2 c18">&nbsp;API specifications</span><span class="c2 c3">, or description languages, are frameworks that help organizations design their APIs, automatically create consistent human-readable documentation, and therefore help developers and users know what to expect regarding the API&rsquo;s functionality and results. Without specifications, there would be little to no consistency between APIs. Consumers would have to learn how each API&rsquo;s documentation was formatted and adjust their application to interact with each API.</span></p><p class="c20"><span class="c2 c3">Instead, a consumer can program their application to ingest different specifications and then easily interact with any API using that given specification. In other words, you can think of specifications as the home electric sockets of APIs. Instead of having a unique electric socket for every home appliance, the use of a single consistent format throughout a home allows you to buy a toaster and plug it into a socket on any wall without any hassle.</span></p><p class="c20"><span class="c2 c18">OpenAPI Specification 3.0 (OAS)</span><span class="c2 c3">, previously known as Swagger, is one of the leading specifications for RESTful APIs. OAS helps organize and manage APIs by allowing developers to describe endpoints, resources, operations, and authentication and authorization requirements. They can then create human- and machine-readable API documentation, formatted as JSON or YAML. Consistent API documentation is good for developers and users.</span></p><p class="c20"><span class="c2">The </span><span class="c2 c18">RESTful API Modeling Language (RAML)</span><span class="c2">&nbsp;is another way to consistently generate API documentation. RAML is an open specification that works exclusively with YAML for document formatting. Similar to OAS, RAML was designed to document, design, build, and test REST APIs. For more information about RAML, check out the raml-spec GitHub repo (</span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://github.com/raml-org/raml-spec&amp;sa=D&amp;source=editors&amp;ust=1681144414069956&amp;usg=AOvVaw21rjpOaxyeo7n6MXG8tzQN">https://github.com/raml-org/raml-spec</a></span><span class="c2 c3">).</span></p><p class="c20"><span class="c2 c3">In later chapters, we will use an API client called Postman to import specifications and get instant access to the capabilities of an organization&rsquo;s APIs.</span></p><h2 class="c14" id="h.l412ftf5ojbr"><span class="c15 c3">API Data Interchange Formats</span></h2><p class="c30 c21"><span class="c2 c3">APIs use several formats to facilitate the exchange of data. Additionally, specifications use these formats to document APIs. Some APIs, like SOAP, require a specific format, whereas others allow the client to specify the format to use in the request and response body. This section introduces three common formats: JSON, XML, and YAML. Familiarity with data interchange formats will help you recognize API types, what the APIs are doing, and how they handle data.</span></p><h3 class="c14" id="h.bezsz4kbwtki"><span class="c36 c3">JSON</span></h3><p class="c30 c21"><span class="c2 c18">JavaScript Object Notation (JSON)</span><span class="c2 c3">&nbsp;is the primary data interchange format we&rsquo;ll use throughout this book, as it is widely used for APIs. It organizes data in a way that is both human-readable and easily parsable by applications; many programming languages can turn JSON into data types they can use.</span></p><p class="c20"><span class="c2 c3">JSON represents objects as key/value pairs separated by commas, within a pair of curly brackets, as follows:</span></p><p class="c5"><span class="c4 c3">{</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;firstName&quot;: &quot;James&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;lastName&quot;: &quot;Lovell&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;tripsToTheMoon&quot;: 2,</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;isAstronaut&quot;: true,</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;walkedOnMoon&quot;: false,</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;comment&quot; : &quot;This is a comment&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;spacecrafts&quot;: [&quot;Gemini 7&quot;, &quot;Gemini 12&quot;, &quot;Apollo 8&quot;, &quot;Apollo 13&quot;],</span></p><p class="c5"><span class="c4 c3">&nbsp; &quot;book&quot;: [</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; {</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &nbsp; &quot;title&quot;: &quot;Lost Moon&quot;,</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &nbsp; &quot;genre&quot;: &quot;Non-fiction&quot;</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; }</span></p><p class="c5"><span class="c4 c3">&nbsp; ]</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c20"><span class="c2">Everything between the first curly bracket and the last is considered an object. Within the object are several key/value pairs, such as </span><span class="c11">&quot;firstName&quot;: &quot;James&quot;</span><span class="c2">, </span><span class="c11">&quot;lastName&quot;: &quot;Lovell&quot;</span><span class="c2">, and </span><span class="c11">&quot;tripsToTheMoon&quot;: 2</span><span class="c2">. The first entry of the key/value pair (on the left) is the </span><span class="c2 c18">key</span><span class="c2">, a string that describes the value pair, and the second is the </span><span class="c2 c18">value</span><span class="c2">&nbsp;(on the right), which is some sort of data represented by one of the acceptable data types (strings, numbers, Boolean values, null, an array, or another object). For example, notice the Boolean value </span><span class="c11">false</span><span class="c2">&nbsp;for </span><span class="c11">&quot;walkedOnMoon&quot;</span><span class="c2">&nbsp;or the </span><span class="c11">&quot;spacecrafts&quot;</span><span class="c2">&nbsp;array surrounded by square brackets. Finally, the nested object </span><span class="c11">&quot;book&quot;</span><span class="c2">&nbsp;contains its own set of key/value pairs. </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23table2-1&amp;sa=D&amp;source=editors&amp;ust=1681144414072425&amp;usg=AOvVaw0EuiOX9GWDozK6JqlcTuSK">Table 2-1</a></span><span class="c2 c3">&nbsp;describes JSON types in more detail.</span></p><p class="c20"><span class="c2">JSON does not allow inline comments, so any sort of comment-like communications must take place as a key/value pair like </span><span class="c11">&quot;comment&quot; : &quot;This is a comment&quot;</span><span class="c2 c3">. Alternatively, you can find comments in the API documentation or HTTP response.</span></p><p class="c10"><span class="c70 c21 c51">Table 2-1</span><span class="c42 c21 c18 c49">: JSON Types</span></p><a id="t.129d890b8bbef64606c010089f61fa5067529def"></a><a id="t.1"></a><table class="c60"><tr class="c48"><td class="c84" colspan="1" rowspan="1"><p class="c8"><span class="c40 c21">Type</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c8"><span class="c40 c21">Description</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c8"><span class="c40 c21">Example</span></p></td></tr><tr class="c69"><td class="c43" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Strings</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Any combination of characters within double quotes.</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c8"><span class="c11 c3">{</span></p><p class="c8"><span class="c11 c3">&quot;Motto&quot;:&quot;Hack the planet&quot;,</span></p><p class="c8"><span class="c11 c3">&quot;Drink&quot;:&quot;Jolt&quot;,</span></p><p class="c8"><span class="c11 c3">&quot;User&rdquo;:&quot;Razor&quot;</span></p><p class="c8"><span class="c11">}</span></p></td></tr><tr class="c81"><td class="c43" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Numbers</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Basic integers, fractions, negative numbers, and exponents. Notice that the multiple items are comma-separated.</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c8"><span class="c27 c3 c21">{</span></p><p class="c8"><span class="c27 c3 c21">&quot;number_1&quot; : 101,</span></p><p class="c8"><span class="c27 c3 c21">&quot;number_2&quot; : -102,</span></p><p class="c8"><span class="c3 c21 c27">&quot;number_3&quot; : 1.03,</span></p><p class="c8"><span class="c27 c3 c21">&quot;number_4&quot; : 1.0E+4</span></p><p class="c8"><span class="c27 c21">}</span></p></td></tr><tr class="c45"><td class="c43" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Boolean values</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Either </span><span class="c11">true</span><span class="c2 c21">&nbsp;or </span><span class="c11">false</span><span class="c2 c21">.</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c8"><span class="c11 c3">{</span></p><p class="c8"><span class="c11 c3">&quot;admin&quot; : false,</span></p><p class="c8"><span class="c11 c3">&quot;privesc&quot; : true</span></p><p class="c8"><span class="c11">}</span></p></td></tr><tr class="c74"><td class="c43" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Null</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">No value.</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c8"><span class="c27 c3 c21">{</span></p><p class="c8"><span class="c27 c3 c21">&quot;value&quot; : null</span></p><p class="c8"><span class="c27 c21">}</span></p></td></tr><tr class="c54"><td class="c43" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Arrays</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">An ordered collection of values. Collections of values are surrounded by brackets (</span><span class="c11">[]</span><span class="c2 c21">) and the values are comma-separated.</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c8"><span class="c11 c3">{</span></p><p class="c8"><span class="c11 c3">&quot;uid&quot; : [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;]</span></p><p class="c8"><span class="c11">}</span></p></td></tr><tr class="c79"><td class="c43" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Objects</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">An unordered set of value pairs inserted between curly brackets (</span><span class="c27 c21">{}</span><span class="c2 c21">). An object can contain multiple key/value pairs.</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c8"><span class="c27 c3 c21">{</span></p><p class="c8"><span class="c27 c3 c21">&quot;admin&quot; : false,</span></p><p class="c8"><span class="c27 c3 c21">&quot;key&quot; : &quot;value&quot;,</span></p><p class="c8"><span class="c27 c3 c21">&quot;privesc&quot; : true,</span></p><p class="c8"><span class="c27 c3 c21">&quot;uid&quot; : 101,</span></p><p class="c8"><span class="c27 c3 c21">&quot;vulnerabilities&quot; : &quot;galore&quot;</span></p><p class="c8"><span class="c27 c21">}</span></p></td></tr></table><p class="c20"><span class="c2 c3">To illustrate these types, take a look at the following key/value pairs in the JSON data found in a Twitter API response:</span></p><p class="c5"><span class="c4 c3">{</span></p><p class="c5"><span class="c4 c3">&quot;id&quot;:1278533978970976256, &#10102;</span></p><p class="c5"><span class="c4 c3">&quot;id_str&quot;:&quot;1278533978970976256&quot;, &#10103;</span></p><p class="c5"><span class="c4 c3">&quot;full_text&quot;:&quot;1984: William Gibson published his debut novel, Neuromancer. It&#39;s a cyberpunk tale about Henry Case, a washed up computer hacker who&#39;s offered a chance at redemption by a mysterious dude named Armitage. Cyberspace. Hacking. Virtual reality. The matrix. Hacktivism. A must read. https:\/\/t.co\/R9hm2LOKQi&quot;,</span></p><p class="c5"><span class="c4 c3">&quot;truncated&quot;:false &#10104;</span></p><p class="c1"><span class="c4 c3">}</span></p><p class="c20"><span class="c2">In this example, you should be able to identify the number </span><span class="c11">1278533978970976256</span><span class="c2">&nbsp;&#10102;, strings like those for the keys </span><span class="c11">&quot;id_str&quot;</span><span class="c2">&nbsp;and </span><span class="c11">&quot;full_text&quot;</span><span class="c2">&nbsp;&#10103;, and the Boolean value &#10104; for </span><span class="c11">&quot;truncated&quot;</span><span class="c2 c3">.</span></p><h3 class="c14" id="h.e33q7m7lq4fw"><span class="c36 c3">XML</span></h3><p class="c30 c21"><span class="c2">The</span><span class="c2 c18">&nbsp;Extensible Markup Language (XML)</span><span class="c2 c3">&nbsp;format has been around for a while, and you&rsquo;ll probably recognize it. XML is characterized by the descriptive tags it uses to wrap data. Although REST APIs can use XML, it is most commonly associated with SOAP APIs. SOAP APIs can only use XML as the data interchange.</span></p><p class="c20"><span class="c2 c3">The Twitter JSON you just saw would look like the following if converted to XML:</span></p><p class="c5"><span class="c4 c3">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &#10102;</span></p><p class="c5"><span class="c4 c3">&lt;root&gt; &#10103;</span></p><p class="c5"><span class="c4 c3">&nbsp; &nbsp; &lt;id&gt;1278533978970976300&lt;/id&gt;</span></p><p class="c5"><span class="c4 c3">&nbsp; &lt;id_str&gt;1278533978970976256&lt;/id_str&gt;</span></p><p class="c5"><span class="c4 c3">&nbsp; &lt;full_text&gt;1984: William Gibson published his debut novel, Neuromancer. It&amp;#x27;s a cyberpunk tale about Henry Case, a washed up computer hacker who&amp;#x27;s offered a chance at redemption by a mysterious dude named Armitage. Cyberspace. Hacking. Virtual reality. The matrix. Hacktivism. A must read. https://t.co/R9hm2LOKQi &lt;/full_text&gt;</span></p><p class="c5"><span class="c4 c3">&nbsp; &lt;truncated&gt;false&lt;/truncated&gt;</span></p><p class="c1"><span class="c4 c3">&lt;/root&gt;</span></p><p class="c20"><span class="c2">XML always begins with a </span><span class="c2 c18">prolog</span><span class="c2 c3">, which contains information about the XML version and encoding used &#10102;.</span></p><p class="c20"><span class="c2">Next, </span><span class="c2 c18">elements </span><span class="c2">are the most basic parts of XML. An element is any XML tag or information surrounded by tags. In the previous example, </span><span class="c11">&lt;id&gt;1278533978970976300&lt;/id&gt;</span><span class="c2">, </span><span class="c11">&lt;id_str&gt;1278533978&lt;/id_str&gt;</span><span class="c2">, </span><span class="c11">&lt;full_text&gt;</span><span class="c2">, </span><span class="c11">&lt;/full_text&gt;</span><span class="c2">, and </span><span class="c11">&lt;truncated&gt;false&lt;/truncated&gt;</span><span class="c2">&nbsp;are all elements. XML must have a root element and can contain child elements. In the example, the root element is </span><span class="c11">&lt;root&gt;</span><span class="c2">&nbsp;&#10103;. The child elements are XML attributes. An example of a child element is the </span><span class="c11">&lt;BookGenre&gt;</span><span class="c2 c3">&nbsp;element within the following example:</span></p><p class="c5"><span class="c11">&lt;LibraryBooks&gt;</span></p><p class="c5"><span class="c4">&nbsp;</span><span class="c11">&lt;BookGenre&gt;SciFi&lt;/BookGenre&gt;</span></p><p class="c1"><span class="c11 c3">&lt;/LibraryBooks&gt;</span></p><p class="c20"><span class="c2">Comments in XML are surrounded by two dashes, like this: </span><span class="c11">&lt;!--XML comment example--&gt;</span><span class="c2 c3">.</span></p><p class="c20"><span class="c2 c3">The key differences between XML and JSON are JSON&rsquo;s descriptive tags, character encoding, and length: the XML takes much longer to convey the same information, a whopping 565 bytes.</span></p><h3 class="c14" id="h.1m1c3z79sym9"><span class="c36 c3">YAML</span></h3><p class="c30 c21"><span class="c2">Another lightweight form of data exchange used in APIs, </span><span class="c2 c18">YAML</span><span class="c2">&nbsp;is a recursive acronym that stands for </span><span class="c2 c18">YAML Ain&rsquo;t Markup Language</span><span class="c2 c3">. It was created as a more human- and computer-readable format for data exchange.</span></p><p class="c20"><span class="c2 c3">Like JSON, YAML documents contain key/value pairs. The value may be any of the YAML data types, which include numbers, strings, Booleans, null values, and sequences. For example, take a look at the following YAML data:</span></p><p class="c5"><span class="c4 c3">---</span></p><p class="c5"><span class="c4 c3">id: 1278533978970976300</span></p><p class="c5"><span class="c4 c3">id_str: 1278533978970976256</span></p><p class="c5"><span class="c4 c3">#Comment about Neuromancer</span></p><p class="c5"><span class="c4 c3">full_text: &quot;1984: William Gibson published his debut novel, Neuromancer. It&#39;s a cyberpunk tale about Henry Case, a washed up computer hacker who&#39;s offered a chance at redemption by a mysterious dude named Armitage. Cyberspace. Hacking. Virtual reality. The matrix. Hacktivism. A must read. https://t.co/R9hm2LOKQi&quot;</span></p><p class="c5"><span class="c4 c3">truncated: false</span></p><p class="c1"><span class="c4 c3">...</span></p><p class="c20"><span class="c2 c3">You&rsquo;ll notice that YAML is much more readable than JSON. YAML documents begin with</span></p><p class="c1"><span class="c11 c3">---</span></p><p class="c30 c21"><span class="c2 c3">and end with</span></p><p class="c1"><span class="c11 c3">...</span></p><p class="c30 c21"><span class="c2">instead of with curly brackets. Also, quotes around strings are optional. Additionally, URLs don&rsquo;t need to be encoded with backslashes. Finally, YAML uses indentation instead of curly brackets to represent nesting and allows for comments beginning with </span><span class="c11">#</span><span class="c2 c3">.</span></p><p class="c20"><span class="c2 c3">API specifications will often be formatted as JSON or YAML, because these formats are easy for humans to digest. With only a few basic concepts in mind, we can look at either of these formats and understand what is going on; likewise, machines can easily parse the information.</span></p><p class="c20"><span class="c2">If you&rsquo;d like to see more YAML in action, visit </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://yaml.org/&amp;sa=D&amp;source=editors&amp;ust=1681144414086056&amp;usg=AOvVaw3ByfwD-Lv2fLsf5axGGaYp">https://yaml.org</a></span><span class="c2 c3">. The entire website is presented in YAML format. YAML is recursive all the way down.</span></p><h2 class="c14" id="h.vdsgsqvpm2kc"><span class="c15 c3">API Authentication</span></h2><p class="c30 c21"><span class="c2 c3">APIs may allow public access to consumers without authentication, but when an API allows access to proprietary or sensitive data, it will use some form of authentication and authorization. An API&rsquo;s authentication process should validate that users are who they claim to be, and the authorization process should grant them the ability to access the data they are allowed to access. This section covers a variety of API authentication and authorization methods. These methods vary in complexity and security, but they all operate on a common principle: the consumer must send some kind of information to the provider when making a request, and the provider must link that information to a user before granting or denying access to a resource.</span></p><p class="c20"><span class="c2 c3">Before jumping into API authentication, it is important to understand what authentication is. Authentication is the process of proving and verifying an identity. In a web application, authentication is the way you prove to the web server that you are a valid user of said web app. Typically, this is done through the use of credentials, which consist of a unique ID (such as a username or email) and password. After a client sends credentials, the web server compares what was sent to the credentials it has stored. If the credentials provided match the credentials stored, the web server will create a user session and issue a cookie to the client.</span></p><p class="c20"><span class="c2 c3">When the session ends between the web app and user, the web server will destroy the session and remove the associated client cookies.</span></p><p class="c20"><span class="c2 c3">As described earlier in this chapter, REST and GraphQL APIs are stateless, so when a consumer authenticates to these APIs, no session is created between the client and server. Instead, the API consumer must prove their identity within every request sent to the API provider&rsquo;s web server.</span></p><h3 class="c14" id="h.b7j7nl45gkqh"><span class="c3 c36">Basic Authentication</span></h3><p class="c30 c21"><span class="c2">The simplest form of API authentication is </span><span class="c2 c18">HTTP basic authentication</span><span class="c2">, in which the consumer includes their username and password in a header or the body of a request. The API could either pass the username and password to the provider in plaintext, like </span><span class="c11">username:password</span><span class="c2">, or it could encode the credentials using something like base64 to save space (for example, as </span><span class="c11">dXNlcm5hbWU6cGFzc3dvcmQK</span><span class="c2 c3">).</span></p><p class="c20"><span class="c2">Encoding is not encryption, and if base64-encoded data is captured, it can easily be decoded. For example, you can use the Linux command line to base64-encode </span><span class="c11">username:password</span><span class="c2 c3">&nbsp;and then decode the encoded result:</span></p><p class="c5"><span class="c4">$ </span><span class="c39">echo &quot;username:password&quot;|base64</span></p><p class="c5"><span class="c4 c3">dXNlcm5hbWU6cGFzc3dvcmQK</span></p><p class="c5"><span class="c4">$ </span><span class="c39">echo &quot;dXNlcm5hbWU6cGFzc3dvcmQK&quot;|base64 -d</span></p><p class="c1"><span class="c3 c4">username:password</span></p><p class="c20"><span class="c2 c3">As you can see, basic authentication has no inherent security and completely depends on other security controls. An attacker can compromise basic authentication by capturing HTTP traffic, performing a man-in-the-middle attack, tricking the user into providing their credentials through social engineering tactics, or performing a brute-force attack in which they attempt various usernames and passwords until they find some that work.</span></p><p class="c20"><span class="c2 c3">Since APIs are often stateless, those using only basic authentication require the consumer to provide credentials in every request. It is common for an API provider to instead use basic authentication once, for the first request, and then issue an API key or some other token for all other requests.</span></p><h3 class="c14" id="h.ndjupe965uar"><span class="c36 c3">API Keys</span></h3><p class="c21 c30"><span class="c2 c18">API keys</span><span class="c2 c3">&nbsp;are unique strings that API providers generate and grant to authorize access for approved consumers. Once an API consumer has a key, they can include it in requests whenever specified by the provider. The provider will typically require that the consumer pass the key in query string parameters, request headers, body data, or as a cookie when they make a request.</span></p><p class="c20"><span class="c2 c3">API keys typically look like semi-random or random strings of numbers and letters. For example, take a look at the API key included in the query string of the following URL:</span></p><p class="c1"><span class="c4">/api/v1/users?apikey=</span><span class="c39 c3">ju574n3x4mpl34p1k3y</span></p><p class="c20"><span class="c2 c3">The following is an API key included as a header:</span></p><p class="c1"><span class="c4">&quot;API-Secret&quot;: </span><span class="c39 c3">&quot;17813fg8-46a7-5006-e235-45be7e9f2345&quot;</span></p><p class="c20"><span class="c2 c3">Finally, here is an API key passed in as a cookie:</span></p><p class="c1"><span class="c4">Cookie: API-Key= </span><span class="c3 c39">4n07h3r4p1k3y</span></p><p class="c20"><span class="c2">The process of acquiring an API key depends on the provider. The NASA API, for example, requires the consumer to register for the API with a name, email address, and optional application URL (if the user is programming an application to use the API), as shown in </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23figure2-3&amp;sa=D&amp;source=editors&amp;ust=1681144414089019&amp;usg=AOvVaw0IeObbBqNu98CGRjL89Nnk">Figure 2-3</a></span><span class="c2 c3">.</span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 438.67px; height: 280.00px;"><img alt="Screenshot of an online form for Generating an API key. Includes fields for First Name, Last Name, Email, and Application URL." src="images/image2.png" style="width: 438.67px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c22 c21 c18">Figure 2-3</span><span class="c49 c42 c21 c18">: NASA&rsquo;s form to generate an API key</span></p><p class="c20"><span class="c2 c3">The resulting key will look something like this:</span></p><p class="c30 c19"><span class="c11 c42 c18">roS6SmRjLdxZzrNSAkxjCdb6WodSda2G9zc2Q7sK</span></p><p class="c20"><span class="c2 c3">It must be passed as a URL parameter in each API request, as follows:</span></p><p class="c30 c19"><span class="c2 c21 c18 c42">api.nasa.gov/planetary/apod?api_key=roS6SmRjLdxZzrNSAkxjCdb6WodSda2G9zc2Q7sK</span></p><p class="c20"><span class="c2 c3">API keys can be more secure than basic authentication for several reasons. When keys are sufficiently long, complex, and randomly generated, they can be exceedingly difficult for an attacker to guess or brute-force. Additionally, providers can set expiration dates to limit the length of time for which the keys are valid.</span></p><p class="c20"><span class="c2 c3">However, API keys have several associated risks that we will take advantage of later in this book. Since each API provider may have their own system for generating API keys, you&rsquo;ll find instances in which the API key is generated based on user data. In these cases, API hackers may guess or forge API keys by learning about the API consumers. API keys may also be exposed to the internet in online repositories, left in code comments, intercepted when transferred over unencrypted connections, or stolen through phishing.</span></p><h3 class="c14" id="h.9a2u7p7p2wud"><span class="c36 c3">JSON Web Tokens</span></h3><p class="c30 c21"><span class="c2">A </span><span class="c2 c18">JSON Web Token (JWT)</span><span class="c2">&nbsp;is a type of token commonly used in API token-based authentication. It&rsquo;s used like this: The API consumer authenticates to the API provider with a username and password. The provider generates a JWT and sends it back to the consumer. The consumer adds the provided JWT to the </span><span class="c11">Authorization</span><span class="c2 c3">&nbsp;header in all API requests.</span></p><p class="c20"><span class="c2">JWTs consist of three parts, all of which are base64-encoded and separated by periods: the header, the payload, and the signature. The </span><span class="c2 c18">header</span><span class="c2">&nbsp;includes information about the algorithm used to sign the payload. The </span><span class="c2 c18">payload</span><span class="c2">&nbsp;is the data included within the token, such as a username, timestamp, and issuer. The </span><span class="c2 c18">signature</span><span class="c2 c3">&nbsp;is the encoded and encrypted message used to validate the token.</span></p><p class="c20"><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23table2-2&amp;sa=D&amp;source=editors&amp;ust=1681144414090702&amp;usg=AOvVaw3wM1P8Rx-WmFib1SSeIICA">Table 2-2</a></span><span class="c2 c3">&nbsp;shows an example of these parts, unencoded for readability, as well as the final token.</span></p><h2 class="c68" id="h.7j7rf8qqb6ao"><span class="c3 c26">NOTE</span></h2><p class="c30"><span class="c2 c21 c18">The signature field is not a literal encoding of </span><span class="c11 c18">HMACSHA512...</span><span class="c2 c21 c18">; rather, the signature is created by calling the encryption function </span><span class="c11 c18">HMACSHA512()</span><span class="c2 c21 c18">, specified by </span><span class="c11 c18">&quot;alg&quot;: &quot;HS512&quot;</span><span class="c2 c42 c21 c18">, on the encoded header and payload, and then encoding the result.</span></p><p class="c10"><span class="c21 c51 c70">Table 2-2</span><span class="c49 c42 c21 c18">: JWT Components</span></p><a id="t.7e807693ad79f2fc5fcf1141ddb278582fcbda3a"></a><a id="t.2"></a><table class="c60"><tr class="c48"><td class="c83" colspan="1" rowspan="1"><p class="c8"><span class="c21 c40">Component</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c8"><span class="c40 c21">Content</span></p></td></tr><tr class="c45"><td class="c56" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Header</span></p></td><td class="c47" colspan="1" rowspan="1"><p class="c8"><span class="c11 c3">{</span></p><p class="c8"><span class="c11 c3">&quot;alg&quot;: &quot;HS512&quot;,</span></p><p class="c8"><span class="c11 c3">&quot;typ&quot;: &quot;JWT&quot;</span></p><p class="c8"><span class="c11">}</span></p></td></tr><tr class="c52"><td class="c56" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Payload</span></p></td><td class="c47" colspan="1" rowspan="1"><p class="c8"><span class="c27 c3 c21">{</span></p><p class="c8"><span class="c27 c3 c21">&quot;sub&quot;: &quot;1234567890&quot;,</span></p><p class="c8"><span class="c27 c3 c21">&quot;name&quot;: &quot;hAPI Hacker&quot;,</span></p><p class="c8"><span class="c27 c3 c21">&quot;iat&quot;: 1516239022</span></p><p class="c8"><span class="c27 c21">}</span></p></td></tr><tr class="c52"><td class="c56" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">Signature</span></p></td><td class="c47" colspan="1" rowspan="1"><p class="c8"><span class="c11 c3">HMACSHA512(</span></p><p class="c8"><span class="c11 c3">base64UrlEncode(header) + &quot;.&quot; +</span></p><p class="c8"><span class="c11 c3">base64UrlEncode(payload),</span></p><p class="c8"><span class="c11 c3">SuperSecretPassword</span></p><p class="c8"><span class="c11">)</span></p></td></tr><tr class="c52"><td class="c56" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">JWT</span></p></td><td class="c47" colspan="1" rowspan="1"><p class="c8"><span class="c27 c21">eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6ImhBUEkgSGFja2VyIiwiaWF0IjoxNTE2MjM5MDIyfQ.zsUjGDbBjqI-bJbaUmvUdKaGSEvROKfNjy9K6TckK55sd97AMdPDLxUZwsneff4O1ZWQikhgPm7HHlXYn4jm0Q</span></p></td></tr></table><p class="c20"><span class="c2 c3">JWTs are generally secure but can be implemented in ways that will compromise that security. API providers can implement JWTs that do not use encryption, which means you would be one base64 decode away from being able to see what is inside the token. An API hacker could decode such a token, tamper with the contents, and send it back to the provider to gain access, as you will see in Chapter 10. The JWT secret key may also be stolen or guessed by brute force.</span></p><h3 class="c14" id="h.dpueyr8ojy0c"><span class="c36 c3">HMAC</span></h3><p class="c30 c21"><span class="c2">A </span><span class="c2 c18">hash-based message authentication code (HMAC)</span><span class="c2">&nbsp;is the primary API authentication method used by Amazon Web Services (AWS). When using HMAC, the provider creates a secret key and shares it with consumer. When a consumer interacts with the API, an HMAC hash function is applied to the consumer&rsquo;s API request data and secret key. The resulting hash (also called a </span><span class="c2 c18">message digest</span><span class="c2 c3">) is added to the request and sent to the provider. The provider calculates the HMAC, just as the consumer did, by running the message and key through the hash function, and then compares the output hash value to the value provided by the client. If the provider&rsquo;s hash value matches the consumer&rsquo;s hash value, the consumer is authorized to make the request. If the values do not match, either the client&rsquo;s secret key is incorrect or the message has been tampered with.</span></p><p class="c20"><span class="c2">The security of the message digest depends on the cryptographic strength of the hash function and secret key. Stronger hash mechanisms typically produce longer hashes. </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23table2-3&amp;sa=D&amp;source=editors&amp;ust=1681144414096361&amp;usg=AOvVaw1DOOoStETte3HgMblvdggc">Table 2-3</a></span><span class="c2 c3">&nbsp;shows the same message and key hashed by different HMAC algorithms.</span></p><p class="c10"><span class="c70 c21 c51">Table 2-3</span><span class="c49 c42 c21 c18">: HMAC Algorithms</span></p><a id="t.7fc7baee85aa13ee5e1d57a8b86b0b77be918c3a"></a><a id="t.3"></a><table class="c60"><tr class="c48"><td class="c78" colspan="1" rowspan="1"><p class="c8"><span class="c40 c21">Algorithm</span></p></td><td class="c57" colspan="1" rowspan="1"><p class="c8"><span class="c40 c21">Hash output</span></p></td></tr><tr class="c48"><td class="c62" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">HMAC-MD5</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">f37438341e3d22aa11b4b2e838120dcf</span></p></td></tr><tr class="c48"><td class="c62" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">HMAC-SHA1</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">4c2de361ba8958558de3d049ed1fb5c115656e65</span></p></td></tr><tr class="c73"><td class="c62" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">HMAC-SHA256</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">be8e73ffbd9a953f2ec892f06f9a5e91e6551023d1942ec7994fa1a78a5ae6bc</span></p></td></tr><tr class="c54"><td class="c62" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">HMAC-SHA512</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c8"><span class="c2 c21">6434a354a730f888865bc5755d9f498126d8f67d73f32ccd2b775c47c91ce26b66dfa59c25aed7f4a6bcb4786d3a3c6130f63ae08367822af3f967d3a7469e1b</span></p></td></tr></table><p class="c20"><span class="c2 c3">You may have some red flags regarding the use of SHA1 or MD5. As of the writing of this book, there are currently no known vulnerabilities affecting HMAC-SHA1 and HMAC-MD5, but these functions are cryptographically weaker than SHA-256 and SHA-512. However, the more secure functions are also slower. The choice of which hash function to use comes down to prioritizing either performance or security.</span></p><p class="c20"><span class="c2 c3">As with the previous authentication methods covered, the security of HMAC depends on the consumer and provider keeping the secret key private. If a secret key is compromised, an attacker could impersonate the victim and gain unauthorized access to the API.</span></p><h3 class="c14" id="h.t0761m3i655b"><span class="c36 c3">OAuth 2.0</span></h3><p class="c30 c21"><span class="c2 c18">OAuth 2.0</span><span class="c2">, or just </span><span class="c2 c18">OAuth</span><span class="c2 c3">, is an authorization standard that allows different services to access each other&rsquo;s data, often using APIs to facilitate the service-to-service communications.</span></p><p class="c20"><span class="c2">Let&rsquo;s say you want to automatically share your Twitter tweets on LinkedIn. In OAuth&rsquo;s model, we would consider Twitter to be the service provider and LinkedIn to be the application or client. In order to post your tweets, LinkedIn will need authorization to access your Twitter information. Since both Twitter and LinkedIn have implemented OAuth, instead of providing your credentials to the service provider and consumer every time you want to share this information across platforms, you can simply go into your LinkedIn settings and authorize Twitter. Doing so will send you to </span><span class="c2 c18">api.twitter.com</span><span class="c2">&nbsp;to authorize LinkedIn to access your Twitter account (see </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23figure2-4&amp;sa=D&amp;source=editors&amp;ust=1681144414100299&amp;usg=AOvVaw2L9_tr3blChwnrn19K3Qth">Figure 2-4</a></span><span class="c2 c3">).</span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 541.33px; height: 461.33px;"><img alt="Screenshot of a Twitter web page asking if you want to authorize LinkedIn to access your account. Includes Authorize app and Cancel buttons." src="images/image6.png" style="width: 541.33px; height: 461.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c22 c21 c18">Figure 2-4</span><span class="c49 c42 c21 c18">: LinkedIn&ndash;Twitter OAuth authorization request</span></p><p class="c20"><span class="c2 c3">When you authorize LinkedIn to access your Twitter posts, Twitter generates a limited, time-based access token for LinkedIn. LinkedIn then provides that token to Twitter to post on your behalf, and you don&rsquo;t have to give LinkedIn your Twitter credentials.</span></p><p class="c20"><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23figure2-5&amp;sa=D&amp;source=editors&amp;ust=1681144414101028&amp;usg=AOvVaw2ss41aYnKI6gpa21iDStnQ">Figure 2-5</a></span><span class="c2">&nbsp;shows the general OAuth process. The user (</span><span class="c2 c18">resource owner</span><span class="c2">) grants an application (the </span><span class="c2 c18">client</span><span class="c2">) access to a service (the </span><span class="c2 c18">authorization server</span><span class="c2">), the service creates a token, and then the application uses the token to exchange data with the service (also the </span><span class="c2 c18">resource server</span><span class="c2 c3">).</span></p><p class="c20"><span class="c2 c3">In the LinkedIn&ndash;Twitter example, you are the resource owner, LinkedIn is the application/client, and Twitter is the authorization server and resource server.</span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 264.00px;"><img alt="Diagram showing the communications between LinkedIn and Twitter during the OAuth authorization process. Includes the following steps: 1) Authorization request (from LinkedIn to the user), 2) Authorization grant (from the user to LinkedIn), 3) Authorization grant (from LinkedIn to the user), 4) Access token (from the authorization server to LinkedIn), 5) Access token (from LinkedIn to the resource server), and 6) Protected resource (from the resource server to LinkedIn)." src="images/image3.png" style="width: 624.00px; height: 264.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c22 c21 c18">Figure 2-5</span><span class="c49 c42 c21 c18">: An illustration of the OAuth process</span></p><p class="c20"><span class="c2 c3">OAuth is one of the most trusted forms of API authorization. However, while it adds security to the authorization process, it also expands the potential attack surface&mdash;although flaws often have more to do with how the API provider implements OAuth than with OAuth itself. API providers that poorly implement OAuth can expose themselves to a variety of attacks such as token injection, authorization code reuse, cross-site request forgery, invalid redirection, and phishing.</span></p><h3 class="c14" id="h.t6mk3dwv0yu6"><span class="c36 c3">No Authentication</span></h3><p class="c30 c21"><span class="c2 c3">As in web applications generally, there are plenty of instances where it is valid for an API to have no authentication at all. If an API does not handle sensitive data and only provides public information, the provider could make the case that no authentication is necessary.</span></p><h2 class="c14" id="h.o4p45gcloryy"><span class="c15 c3">APIs in Action: Exploring Twitter&rsquo;s API</span></h2><p class="c30 c21"><span class="c2">After reading this and the previous chapter, you should understand the various components running beneath the GUI of a web application. Let&rsquo;s now make these concepts more concrete by taking a close look at Twitter&rsquo;s API. If you open a web browser and visit the URL </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://twitter.com/&amp;sa=D&amp;source=editors&amp;ust=1681144414102360&amp;usg=AOvVaw2AlDs-FL5w2hRAFpCR1T6t">https://twitter.com</a></span><span class="c2 c3">, the initial request triggers a series of communications between the client and the server. Your browser automatically orchestrates these data transfers, but by using a web proxy like Burp Suite, which we&rsquo;ll set up in Chapter 4, you can see all the requests and responses in action.</span></p><p class="c20"><span class="c2 c3">The communications begin with the typical kind of HTTP traffic described in Chapter 1:</span></p><p class="c5"><span class="c2">Once you&rsquo;ve entered a URL into your browser, the browser automatically submits an HTTP GET request to the web server at </span><span class="c2 c18">twitter.com</span><span class="c2">:<br></span><span class="c4 c3">GET / HTTP/1.1</span></p><p class="c5"><span class="c4 c3">Host: twitter.com</span></p><p class="c5"><span class="c4 c3">User-Agent: Mozilla/5.0</span></p><p class="c5"><span class="c4 c3">Accept: text/html</span></p><p class="c5"><span class="c4 c3">--snip--</span></p><ol class="c33 lst-kix_nij9xt7ta2p1-0 start" start="1"><li class="c32 c21 li-bullet-0"><span class="c4 c3">Cookie: [...]</span></li></ol><p class="c5"><span class="c2">The Twitter web application server receives the request and responds to the GET request by issuing a successful 200 OK response:<br></span><span class="c4 c3">HTTP/1.1 200 OK</span></p><p class="c5"><span class="c4 c3">cache-control: no-cache, no-store, must-revalidate</span></p><p class="c5"><span class="c4 c3">connection: close</span></p><p class="c5"><span class="c4 c3">content-security-policy: content-src &#39;self&#39;</span></p><p class="c5"><span class="c4 c3">content-type: text/html; charset=utf-8</span></p><p class="c5"><span class="c4 c3">server: tsa_a</span></p><p class="c5"><span class="c4 c3">--snip--</span></p><p class="c5"><span class="c4 c3">x-powered-by: Express</span></p><p class="c5"><span class="c4 c3">x-response-time: 56</span></p><p class="c5 c16"><span class="c4 c3"></span></p><p class="c5"><span class="c4 c3">&lt;!DOCTYPE html&gt;</span></p><p class="c5"><span class="c4 c3">&lt;html dir=&quot;ltr&quot; lang=&quot;en&quot;&gt;</span></p><p class="c5"><span class="c4">--snip--<br></span><span class="c2">This response header contains the status of the HTTP connection, client instructions, middleware information, and cookie-related information. </span><span class="c2 c18">Client instructions</span><span class="c2">&nbsp;tell the browser how to handle the requested information, such as caching data, the content security policy, and instructions about the type of content that was sent. The actual payload begins just below </span><span class="c11">x-response-time</span><span class="c2">; it provides the browser with the HTML needed to render the web page.<br>Now imagine that the user looks up &ldquo;hacking&rdquo; using Twitter&rsquo;s search bar. This kicks off a POST request to Twitter&rsquo;s API, as shown next. Twitter is able to leverage APIs to distribute requests and seamlessly provide requested resources to many users.<br></span><span class="c4 c3">POST /1.1/jot/client_event.json?q=hacking HTTP/1.1</span></p><p class="c5"><span class="c4 c3">Host: api.twitter.com</span></p><p class="c5"><span class="c4 c3">User-Agent: Mozilla/5.0</span></p><p class="c5"><span class="c4 c3">--snip--</span></p><p class="c5"><span class="c4 c3">Authorization: Bearer AAAAAAAAAAAAAAAAA...</span></p><p class="c5"><span class="c4">--snip--<br></span><span class="c2">This POST request is an example of the Twitter API querying the web service at </span><span class="c2 c18">api.twitter.com</span><span class="c2">&nbsp;for the search term &ldquo;hacking.&rdquo; The Twitter API responds with JSON containing the search results, which includes tweets and information about each tweet such as user mentions, hashtags, and post times:<br></span><span class="c4 c3">&quot;created_at&quot;: [...]</span></p><p class="c5"><span class="c4 c3">&quot;id&quot;:1278533978970976256</span></p><p class="c5"><span class="c4 c3">&quot;id_str&quot;: &quot;1278533978970976256&quot;</span></p><p class="c5"><span class="c4 c3">&quot;full-text&quot;: &quot;1984: William Gibson published his debut novel...&quot;</span></p><p class="c5"><span class="c4 c3">&quot;truncated&quot;:false,</span></p><ol class="c33 lst-kix_nij9xt7ta2p1-0" start="2"><li class="c32 c21 li-bullet-0"><span class="c4">--snip--<br></span><span class="c2">The fact that the Twitter API seems to adhere to CRUD, API naming conventions, tokens for authorization, </span><span class="c2 c18">application/x-www-form-urlencoded</span><span class="c2">, and JSON as a data interchange makes it pretty clear that this API is a RESTful API.<br>Although the response body is formatted in a legible way, it&rsquo;s meant to be processed by the browser to be displayed as a human-readable web page. The browser renders the search results using the string from the API request. The provider&rsquo;s response then populates the page with search results, images, and social media&ndash;related information such as likes, retweets, comments (see </span><span class="c44 c18"><a class="c25" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c02.xhtml%23figure2-6&amp;sa=D&amp;source=editors&amp;ust=1681144414105106&amp;usg=AOvVaw3lbdXEGS5VV2gTrImBuy6_">Figure 2-6</a></span><span class="c2 c3">).</span></li></ol><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 481.33px; height: 494.67px;"><img alt="Screenshot of a Twitter search for the word &ldquo;hacking&rdquo;" src="images/image5.png" style="width: 481.33px; height: 494.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c21 c18 c22">Figure 2-6</span><span class="c49 c42 c21 c18">: The rendered result from the Twitter API search request</span></p><p class="c20"><span class="c2 c3">From the end user&rsquo;s perspective, the whole interaction appears seamless: you click the search bar, type in a query, and receive the results.</span></p><h2 class="c14" id="h.qnqkv5fd9pig"><span class="c3 c15">Summary</span></h2><p class="c30 c21"><span class="c2 c3">In this chapter, we covered the terminology, parts, types, and supporting architecture of APIs. You learned that APIs are interfaces for interacting with web applications. Different types of APIs have different rules, functions, and purposes, but they all use some kind of format for exchanging data between applications. They often use authentication and authorization schemes to make sure consumers can access only the resources they&rsquo;re supposed to.</span></p><p class="c20"><span class="c2 c3">Understanding these concepts will prepare you to confidently strike at the components that make up APIs. As you continue to read, refer to this chapter if you encounter API concepts that confuse you.</span></p><p class="c5 c16"><span class="c3 c46 c80"></span></p></body></html>
<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_4oh412crl23x-2>li{counter-increment:lst-ctn-kix_4oh412crl23x-2}.lst-kix_4oh412crl23x-5>li{counter-increment:lst-ctn-kix_4oh412crl23x-5}ol.lst-kix_4oh412crl23x-3.start{counter-reset:lst-ctn-kix_4oh412crl23x-3 0}.lst-kix_4oh412crl23x-8>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-8,lower-roman) ". "}ol.lst-kix_4oh412crl23x-8.start{counter-reset:lst-ctn-kix_4oh412crl23x-8 0}ol.lst-kix_4oh412crl23x-4.start{counter-reset:lst-ctn-kix_4oh412crl23x-4 0}.lst-kix_4oh412crl23x-4>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-4,lower-latin) ". "}.lst-kix_4oh412crl23x-6>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-6,decimal) ". "}.lst-kix_4oh412crl23x-3>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-3,decimal) ". "}.lst-kix_4oh412crl23x-7>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-7,lower-latin) ". "}ol.lst-kix_4oh412crl23x-3{list-style-type:none}ol.lst-kix_4oh412crl23x-4{list-style-type:none}.lst-kix_4oh412crl23x-0>li{counter-increment:lst-ctn-kix_4oh412crl23x-0}ol.lst-kix_4oh412crl23x-1{list-style-type:none}ol.lst-kix_4oh412crl23x-2{list-style-type:none}ol.lst-kix_4oh412crl23x-6.start{counter-reset:lst-ctn-kix_4oh412crl23x-6 0}.lst-kix_4oh412crl23x-6>li{counter-increment:lst-ctn-kix_4oh412crl23x-6}ol.lst-kix_4oh412crl23x-0{list-style-type:none}ol.lst-kix_4oh412crl23x-1.start{counter-reset:lst-ctn-kix_4oh412crl23x-1 0}.lst-kix_4oh412crl23x-3>li{counter-increment:lst-ctn-kix_4oh412crl23x-3}.lst-kix_4oh412crl23x-5>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-5,lower-roman) ". "}ol.lst-kix_4oh412crl23x-7.start{counter-reset:lst-ctn-kix_4oh412crl23x-7 0}ol.lst-kix_4oh412crl23x-2.start{counter-reset:lst-ctn-kix_4oh412crl23x-2 0}ol.lst-kix_4oh412crl23x-7{list-style-type:none}ol.lst-kix_4oh412crl23x-8{list-style-type:none}ol.lst-kix_4oh412crl23x-0.start{counter-reset:lst-ctn-kix_4oh412crl23x-0 0}ol.lst-kix_4oh412crl23x-5{list-style-type:none}ol.lst-kix_4oh412crl23x-6{list-style-type:none}.lst-kix_4oh412crl23x-1>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-1,lower-latin) ". "}.lst-kix_4oh412crl23x-0>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-0,decimal) ". "}.lst-kix_4oh412crl23x-2>li:before{content:"" counter(lst-ctn-kix_4oh412crl23x-2,lower-roman) ". "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_4oh412crl23x-7>li{counter-increment:lst-ctn-kix_4oh412crl23x-7}.lst-kix_4oh412crl23x-4>li{counter-increment:lst-ctn-kix_4oh412crl23x-4}.lst-kix_4oh412crl23x-1>li{counter-increment:lst-ctn-kix_4oh412crl23x-1}.lst-kix_4oh412crl23x-8>li{counter-increment:lst-ctn-kix_4oh412crl23x-8}ol.lst-kix_4oh412crl23x-5.start{counter-reset:lst-ctn-kix_4oh412crl23x-5 0}ol{margin:0;padding:0}table td,table th{padding:0}.c38{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;margin-right:18pt;margin-left:18pt;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c12{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;text-indent:12pt;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c16{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c44{border-right-style:solid;padding-top:6pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.125;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c26{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c56{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c58{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c31{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-top-style:solid;margin-left:54pt;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c42{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:165.8pt;border-top-color:#000000;border-bottom-style:solid}.c48{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:72.8pt;border-top-color:#000000;border-bottom-style:solid}.c0{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:66pt;border-top-color:#000000;border-bottom-style:solid}.c46{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:93pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:348pt;border-top-color:#000000;border-bottom-style:solid}.c51{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:72.8pt;border-top-color:#000000;border-bottom-style:solid}.c27{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:348pt;border-top-color:#000000;border-bottom-style:solid}.c49{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:105.8pt;border-top-color:#000000;border-bottom-style:solid}.c29{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:105.8pt;border-top-color:#000000;border-bottom-style:solid}.c30{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:66pt;border-top-color:#000000;border-bottom-style:solid}.c60{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:260.2pt;border-top-color:#000000;border-bottom-style:solid}.c33{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:260.2pt;border-top-color:#000000;border-bottom-style:solid}.c55{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:78pt;border-top-color:#000000;border-bottom-style:solid}.c50{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:93pt;border-top-color:#000000;border-bottom-style:solid}.c6{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:78pt;border-top-color:#000000;border-bottom-style:solid}.c43{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:58.5pt;border-top-color:#000000;border-bottom-style:solid}.c36{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:58.5pt;border-top-color:#000000;border-bottom-style:solid}.c17{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:165.8pt;border-top-color:#000000;border-bottom-style:solid}.c3{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:12pt;font-family:"Times New Roman";font-style:italic}.c7{background-color:#ffffff;color:#3d3b49;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c14{background-color:#eef2f6;color:#3d3b49;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Courier New";font-style:normal}.c10{background-color:#ffffff;color:#3d3b49;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Times New Roman"}.c2{color:#3d3b49;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c53{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none;font-size:9pt;font-family:"Times New Roman"}.c4{padding-top:24pt;padding-bottom:24pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c39{background-color:#eef2f6;color:#3d3b49;font-weight:700;font-size:12pt;font-family:"Courier New";font-style:normal}.c54{background-color:#000000;color:#ffffff;font-weight:700;font-size:10pt;font-family:"Arial";font-style:normal}.c1{padding-top:24pt;padding-bottom:42pt;line-height:1.75;orphans:2;widows:2;text-align:left}.c41{padding-top:18pt;padding-bottom:18pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c13{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c21{background-color:#eef2f6;font-size:12pt;font-family:"Courier New";color:#188038;font-weight:400}.c40{background-color:#eef2f6;font-size:12pt;font-family:"Courier New";color:#3d3b49;font-weight:700}.c28{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial";font-style:normal}.c52{color:#3d3b49;font-weight:700;font-size:54pt;font-family:"Times New Roman";font-style:normal}.c20{color:#3d3b49;font-weight:700;font-size:14.5pt;font-family:"Times New Roman";font-style:normal}.c47{color:#3d3b49;font-weight:700;font-size:23.5pt;font-family:"Times New Roman";font-style:normal}.c25{color:#3d3b49;font-weight:700;font-size:40.5pt;font-family:"Times New Roman";font-style:normal}.c11{border-spacing:0;border-collapse:collapse;margin-right:auto}.c19{background-color:#ffffff;font-size:12pt;color:#3d3b49;font-weight:700}.c5{font-size:12pt;font-family:"Times New Roman";color:#3d3b49;font-weight:400}.c59{padding:0;margin:0}.c57{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c18{text-decoration:none;vertical-align:baseline}.c34{color:inherit;text-decoration:inherit}.c23{background-color:#ffffff}.c15{height:11pt}.c45{height:63pt}.c8{font-style:italic}.c35{height:147pt}.c9{height:126pt}.c37{height:105pt}.c32{height:84pt}.c22{height:42pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c23 c57 doc-content"><h1 class="c26" id="h.b098201fqcsz"><span class="c18 c23 c52">1</span></h1><h1 class="c26" id="h.b098201fqcsz-1"><span class="c25 c18 c23">HOW WEB APPLICATIONS WORK</span></h1><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 610.67px; height: 800.00px;"><img alt="" src="images/image1.png" style="width: 610.67px; height: 800.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c16"><span class="c2">Before you can hack APIs, you must understand the technologies that support them. In this chapter, I will cover everything you need to know about web applications, including the fundamental aspects of HyperText Transfer Protocol (HTTP), authentication and authorization, and common web server databases. Because web APIs are powered by these technologies, understanding these basics will prepare you for using and hacking APIs.</span></p><h2 class="c26 c23" id="h.5u3bly99nkvy"><span class="c18 c47">Web App Basics</span></h2><p class="c16"><span class="c5">Web applications function based on the client/server model: your web browser, the client, generates requests for resources and sends these to computers called web servers. In turn, these web servers send resources to the clients over a network. The term </span><span class="c5 c8">web application</span><span class="c2">&nbsp;refers to software that is running on a web server, such as Wikipedia, LinkedIn, Twitter, Gmail, GitHub, and Reddit.</span></p><p class="c12"><span class="c2">In particular, web applications are designed for end-user interactivity. Whereas websites are typically read-only and provide one-way communication from the web server to the client, web applications allow communications to flow in both directions, from server to client and from client to server. Reddit, for example, is a web app that acts as a newsfeed of information flowing around the internet. If it were merely a website, visitors would be spoon-fed whatever content the organization behind the site provided. Instead, Reddit allows users to interact with the information on the site by posting, upvoting, downvoting, commenting, sharing, reporting bad posts, and customizing their newsfeeds with subreddits they want to see. These features differentiate Reddit from a static website.</span></p><p class="c12"><span class="c2">For an end user to begin using a web application, a conversation must take place between the web browser and a web server. The end user initiates this conversation by entering a URL into their browser address bar. In this section, we&rsquo;ll discuss what happens next.</span></p><h3 class="c26 c23" id="h.8g0vib2odoix"><span class="c20 c18">The URL</span></h3><p class="c16"><span class="c5">You probably already know that the </span><span class="c5 c8">uniform resource locator (URL)</span><span class="c2">&nbsp;is the address used to locate unique resources on the internet. This URL consists of several components that you&rsquo;ll find helpful to understand when crafting API requests in later chapters. All URLs include the protocol used, the hostname, the port, the path, and any query parameters:</span></p><p class="c38"><span class="c5 c18 c8 c23">Protocol://hostname[:port number]/[path]/[?query][parameters]</span></p><p class="c12"><span class="c5 c8">Protocols </span><span class="c2">are the sets of rules computers use to communicate. The primary protocols used within the URL are HTTP/HTTPS for web pages and FTP for file transfers.</span></p><p class="c12"><span class="c5">The </span><span class="c5 c8">port</span><span class="c5">, a number that specifies a communication channel, is only included if the host does not automatically resolve the request to the proper port. Typically, HTTP communications take place over port 80. HTTPS, the encrypted version of HTTP, uses port 443, and FTP uses port 21. To access a web app that is hosted on a nonstandard port, you can include the port number in the URL, like so: </span><span class="c5 c8">https://www.example.com:8443</span><span class="c2">. (Ports 8080 and 8443 are common alternatives for HTTP and HTTPS, respectively.)</span></p><p class="c12"><span class="c5">The file directory </span><span class="c5 c8">path</span><span class="c2">&nbsp;on the web server points to the location of the web pages and files specified in the URL. The path used in a URL is the same as a filepath used to locate files on a computer.</span></p><p class="c12"><span class="c5">The </span><span class="c5 c8">query</span><span class="c5">&nbsp;is an optional part of the URL used to perform functionality such as searching, filtering, and translating the language of the requested information. The web application provider may also use the query strings to track certain information such as the URL that referred you to the web page, your session ID, or your email. It starts with a question mark and contains a string that the server is programmed to process. Finally, the </span><span class="c5 c8">query parameters</span><span class="c5">&nbsp;are the values that describe what should be done with the given query. For example, the query parameter </span><span class="c21">lang=en</span><span class="c5">&nbsp;following the query </span><span class="c21">page?</span><span class="c5">&nbsp;might indicate to the web server that it should provide the requested page in English. These parameters consist of another string to be processed by the web server. A query can contain multiple parameters separated by an ampersand (</span><span class="c21">&amp;</span><span class="c2">).</span></p><p class="c12"><span class="c5">To make this information more concrete, consider the URL </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://twitter.com/search?q%3Dhacking%26src%3Dtyped_query&amp;sa=D&amp;source=editors&amp;ust=1681144406275158&amp;usg=AOvVaw33D2JH4rxuqU0dZZe4DTEq">https://twitter.com/search?q=hacking&amp;src=typed_query</a></span><span class="c5">. In this example, the protocol is </span><span class="c5 c8">https</span><span class="c5">, the hostname is </span><span class="c5 c8">twitter.com</span><span class="c5">, the path is </span><span class="c5 c8">search</span><span class="c5">, the query is </span><span class="c5 c8">?q </span><span class="c5">(which stands for query), the query parameter is </span><span class="c5 c8">hacking</span><span class="c5">, and</span><span class="c5 c8">&nbsp;src=typed_query </span><span class="c5">is a tracking parameter. This URL is automatically built whenever you click the search bar in the Twitter web app, type in the search term &ldquo;hacking,&rdquo; and press ENTER. The browser is programmed to form the URL in a way that will be understood by the Twitter web server, and it collects some tracking information in the form of the </span><span class="c21">src</span><span class="c2">&nbsp;parameter. The web server will receive the request for hacking content and respond with hacking-related information.</span></p><h3 class="c23 c26" id="h.7urqv4vv3vep"><span class="c20 c18">HTTP Requests</span></h3><p class="c16"><span class="c5">When an end user navigates to a URL using a web browser, the browser automatically generates an HTTP </span><span class="c5 c8">request</span><span class="c2">&nbsp;for a resource. This resource is the information being requested&mdash;typically the files that make up a web page. The request is routed across the internet or network to the web server, where it is initially processed. If the request is properly formed, the web server passes the request to the web application.</span></p><p class="c12"><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23listing1-1&amp;sa=D&amp;source=editors&amp;ust=1681144406276295&amp;usg=AOvVaw2GSHq3zzDN-WcougsULWma">Listing 1-1</a></span><span class="c5">&nbsp;shows the components of an HTTP request sent when authenticating to </span><span class="c5 c8">twitter.com</span><span class="c2">.</span></p><p class="c13"><span class="c14">POST&#10102; /sessions&#10103; HTTP/1.1&#10104;</span></p><p class="c13"><span class="c14">Host: twitter.com&#10105;</span></p><p class="c13"><span class="c14">User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0</span></p><p class="c13"><span class="c14">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span></p><p class="c13"><span class="c14">Accept-Language: en-US,en;q=0.5</span></p><p class="c13"><span class="c14">Accept-Encoding: gzip, deflate</span></p><p class="c13"><span class="c14">Content-Type: application/x-www-form-urlencoded</span></p><p class="c13"><span class="c14">Content-Length: 444</span></p><p class="c13"><span class="c14">Cookie: _personalization_id=GA1.2.1451399206.1606701545; dnt=1;</span></p><p class="c13 c15"><span class="c14"></span></p><p class="c41"><span class="c14">username_or_email%5D=hAPI_hacker&amp;&#10106;password%5D=NotMyPassword&#10107;%21&#10108;</span></p><p class="c16"><span class="c3">Listing 1-1</span><span class="c5 c18 c8">: An HTTP request to authenticate with twitter.com</span></p><p class="c12"><span class="c5">HTTP requests start with the method &#10102;, the path of the requested resource &#10103;, and the protocol version &#10104;. The method, described in the &ldquo;HTTP Methods&rdquo; section later in this chapter, tells the server what you want to do. In this case, you use the POST method to send your login credentials to the server. The path may contain either the entire URL, the absolute path, or the relative path of a resource. In this request, the path, </span><span class="c5 c8">/sessions</span><span class="c2">, specifies the page that handles Twitter authentication requests.</span></p><p class="c12"><span class="c5">Requests include several </span><span class="c5 c8">headers</span><span class="c5">, which are key-value pairs that communicate specific information between the client and the web server. Headers begin with the header&rsquo;s name, followed by a colon (</span><span class="c21">:</span><span class="c5">) and then the value of the header. The </span><span class="c21">Host</span><span class="c5">&nbsp;header &#10105; designates the domain host, </span><span class="c5 c8">twitter.com</span><span class="c5">. The </span><span class="c21">User-Agent</span><span class="c5">&nbsp;header describes the client&rsquo;s browser and operating system. The </span><span class="c21">Accept</span><span class="c5">&nbsp;headers describe which types of content the browser can accept from the web application in a response. Not all headers are required, and the client and server may include others not shown here, depending on the request. For example, this request includes a </span><span class="c21">Cookie</span><span class="c5">&nbsp;header, which is used between the client and server to establish a stateful connection (more on this later in the chapter). If you&rsquo;d like to learn more about all the different headers, check out Mozilla&rsquo;s developer page on headers (</span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers&amp;sa=D&amp;source=editors&amp;ust=1681144406278154&amp;usg=AOvVaw38enzBX0VaXM5dBznMaDYf">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers</a></span><span class="c2">).</span></p><p class="c12"><span class="c5">Anything below the headers is the </span><span class="c5 c8">message body</span><span class="c5">, which is the information that the requestor is attempting to have processed by the web application. In this case, the body consists of the username &#10106; and password &#10107; used to authenticate to a Twitter account. Certain characters in the body are automatically encoded. For example, exclamation marks (</span><span class="c21">!</span><span class="c5">) are encoded as </span><span class="c21">%21</span><span class="c2">&nbsp;&#10108;. Encoding characters is one way that a web application may securely handle characters that could cause problems.</span></p><h3 class="c26 c23" id="h.5bnwa4j829go"><span class="c20 c18">HTTP Responses</span></h3><p class="c16"><span class="c5">After a web server receives an HTTP request, it will process and respond to the request. The type of response depends on the availability of the resource, the user&rsquo;s authorization to access the resource, the health of the web server, and other factors. For example, </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23listing1-2&amp;sa=D&amp;source=editors&amp;ust=1681144406279030&amp;usg=AOvVaw3c5BGScpy5KbzRsWAXp5QR">Listing 1-2</a></span><span class="c5">&nbsp;shows the response to the request in </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23listing1-1&amp;sa=D&amp;source=editors&amp;ust=1681144406279322&amp;usg=AOvVaw3MGqYrsXK7sYsNxz_1cSxO">Listing 1-1</a></span><span class="c2">.</span></p><p class="c13"><span class="c14">HTTP/1.1&#10102; 302 Found&#10103;</span></p><p class="c13"><span class="c14">content-security-policy: default-src &#39;none&#39;; connect-src &#39;self&#39;</span></p><p class="c13"><span class="c14">location: https://twitter.com/</span></p><p class="c13"><span class="c14">pragma: no-cache</span></p><p class="c13"><span class="c14">server: tsa_a</span></p><p class="c13"><span class="c14">set-cookie: auth_token=8ff3f2424f8ac1c4ec635b4adb52cddf28ec18b8; Max-Age=157680000; Expires=Mon, 01 Dec 2025 16:42:40 GMT; Path=/; Domain=.twitter.com; Secure; HTTPOnly; SameSite=None</span></p><p class="c13 c15"><span class="c14"></span></p><p class="c41"><span class="c14">&lt;html&gt;&lt;body&gt;You are being &lt;a href=&quot;https://twitter.com/&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;</span></p><p class="c16"><span class="c3">Listing 1-2</span><span class="c5 c8 c18">: An example of an HTTP response when authenticating to twitter.com</span></p><p class="c12"><span class="c2">The web server first responds with the protocol version in use (in this case, HTTP/1.1 &#10102;). HTTP 1.1 is currently the standard version of HTTP used. The status code and status message &#10103;, discussed in more detail in the next section, are 302 Found. The 302 response code indicates that the client successfully authenticated and will be redirected to a landing page the client is authorized to access.</span></p><p class="c12"><span class="c5">Notice that, like HTTP request headers, there are HTTP response headers. HTTP response headers often provide the browser with instructions for handling the response and security requirements. The </span><span class="c21">set-cookie</span><span class="c5">&nbsp;header is another indication that the authentication request was successful, because the web server has issued a cookie that includes an </span><span class="c21">auth_token</span><span class="c2">, which the client can use to access certain resources. The response message body will follow the empty line after the response headers. In this case, the web server has sent an HTML message indicating that the client is being redirected to a new web page.</span></p><p class="c12"><span class="c5">The request and response I&rsquo;ve shown here illustrates a common way in which a web application restricts access to its resources through the use of authentication and authorization. Web </span><span class="c5 c8">authentication</span><span class="c5">&nbsp;is the process of proving your identity to a web server. Common forms of authentication include providing a password, token, or biometric information (such as a fingerprint). If a web server approves an authentication request, it will respond by providing the authenticated user </span><span class="c5 c8">authorization</span><span class="c5">&nbsp;to access certain resources. In </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23listing1-1&amp;sa=D&amp;source=editors&amp;ust=1681144406280853&amp;usg=AOvVaw3j3EFYd0Wqwy8JegFk5vG3">Listing 1-1</a></span><span class="c5">, we saw an authentication request to a Twitter web server that sent a username and password using a POST request. The Twitter web server responded to the successful authentication request with 302 Found (in </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23listing1-2&amp;sa=D&amp;source=editors&amp;ust=1681144406281163&amp;usg=AOvVaw1b08TRtLigpj639sBfkmdx">Listing 1-2</a></span><span class="c5">). The session </span><span class="c21">auth_token</span><span class="c5">&nbsp;in the </span><span class="c21">set-cookie</span><span class="c2">&nbsp;header authorized access to the resources associated with the hAPI_hacker Twitter account.</span></p><h2 class="c56" id="h.3vupuvqfsow3"><span class="c18 c54">NOTE</span></h2><p class="c58"><span class="c5 c23 c8">HTTP traffic is sent in cleartext, meaning it&rsquo;s not hidden or encrypted in any way. Anyone who intercepted the authentication request in </span><span class="c3 c23"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23listing1-1&amp;sa=D&amp;source=editors&amp;ust=1681144406281881&amp;usg=AOvVaw0f7nNnYm7BiqpB_iww_3yC">Listing 1-1</a></span><span class="c5 c18 c23 c8">&nbsp;could read the username and password. To protect sensitive information, HTTP protocol requests can be encrypted with Transport Layer Security (TLS) to create the HTTPS protocol.</span></p><h3 class="c26 c23" id="h.opju13kgxnzm"><span class="c18 c20">HTTP Status Codes</span></h3><p class="c16"><span class="c2">When a web server responds to a request, it issues a response status code, along with a response message. The response code signals how the web server has handled the request. At a high level, the response code determines if the client will be allowed or denied access to a resource. It can also indicate that a resource does not exist, there is a problem with the web server, or requesting the given resource has resulted in being redirected to another location.</span></p><p class="c12"><span class="c2">Listings 1-3 and 1-4 illustrate the difference between a 200 response and a 404 response, respectively.</span></p><p class="c13"><span class="c40">HTTP/1.1 200 OK</span></p><p class="c13"><span class="c14">Server: tsa_a</span></p><p class="c13"><span class="c40">Content-length: 6552</span></p><p class="c13 c15"><span class="c14"></span></p><p class="c13"><span class="c40">&lt;!DOCTYPE html&gt;</span></p><p class="c13"><span class="c40">&lt;html dir=&quot;ltr&quot; lang=&quot;en&quot;&gt;</span></p><p class="c41"><span class="c39 c18">[...]</span></p><p class="c16"><span class="c3">Listing 1-3</span><span class="c5 c18 c8">: An example of a 200 response</span></p><p class="c13"><span class="c40">HTTP/1.1 404 Not Found</span></p><p class="c13"><span class="c14">Server: tsa_a</span></p><p class="c41"><span class="c18 c39">Content-length: 0</span></p><p class="c16"><span class="c3">Listing 1-4:</span><span class="c5 c18 c8">&nbsp;An example of a 404 response</span></p><p class="c12"><span class="c2">The 200 OK response will provide the client with access to the requested resource, whereas the 404 Not Found response will either provide the client with some sort of error page or a blank page, because the requested resource was not found.</span></p><p class="c12"><span class="c5">Since web APIs primarily function using HTTP, it is important to understand the sorts of response codes you should expect to receive from a web server, as detailed in </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23table1-1&amp;sa=D&amp;source=editors&amp;ust=1681144406283900&amp;usg=AOvVaw20QaV7jB9OvUux0gt8nm9f">Table 1-1</a></span><span class="c5">. For more information about individual response codes or about web technologies in general, check out Mozilla&rsquo;s Web Docs (</span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://developer.mozilla.org/en-US/docs/Web/HTTP&amp;sa=D&amp;source=editors&amp;ust=1681144406284234&amp;usg=AOvVaw0KTynrjgiDSCSDUzYJX0Ys">https://developer.mozilla.org/en-US/docs/Web/HTTP</a></span><span class="c2">). Mozilla has provided a ton of useful information about the anatomy of web applications.</span></p><p class="c44"><span class="c53 c23">Table 1-1</span><span class="c10 c8">: HTTP Response Code Ranges</span></p><a id="t.c17e6b1b1a4cc07c863439fccfdaf6dd69ca1be5"></a><a id="t.0"></a><table class="c11"><tr class="c45"><td class="c48" colspan="1" rowspan="1"><p class="c1"><span class="c19">Response code</span></p></td><td class="c50" colspan="1" rowspan="1"><p class="c1"><span class="c19">Response type</span></p></td><td class="c60" colspan="1" rowspan="1"><p class="c1"><span class="c19">Description</span></p></td></tr><tr class="c32"><td class="c51" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">100s</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Information-based responses</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Responses in the 100s are typically related to some sort of processing status update regarding the request.</span></p></td></tr><tr class="c45"><td class="c51" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">200s</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Successful responses</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Responses in the 200s indicate a successful and accepted request.</span></p></td></tr><tr class="c9"><td class="c51" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">300s</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Redirects</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Responses in the 300s are notifications of redirection. This is common to see for a request that automatically redirects you to the index/home page or when you request a page from port 80 HTTP to port 443 for HTTPS.</span></p></td></tr><tr class="c35"><td class="c51" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">400s</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Client errors</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Responses in the 400s indicate that something has gone wrong from the client perspective. This is often the type of response you will receive if you have requested a page that does not exist, if there is a timeout in the response, or when you are forbidden from viewing the page.</span></p></td></tr><tr class="c37"><td class="c51" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">500s</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Server errors</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Responses in the 500s are indications that something has gone wrong with the server. These include internal server errors, unavailable services, and unrecognized request methods.</span></p></td></tr></table><h3 class="c26 c23" id="h.xsqarp57w2yz"><span class="c20 c18">HTTP Methods</span></h3><p class="c16"><span class="c5">HTTP </span><span class="c5 c8">methods</span><span class="c2">&nbsp;request information from a web server. Also known as HTTP verbs, the HTTP methods include GET, PUT, POST, HEAD, PATCH, OPTIONS, TRACE, and DELETE.</span></p><p class="c12"><span class="c5">GET and POST are the two most commonly used request methods. The GET request is used to obtain resources from a web server, and the POST request is used to submit data to a web server. </span><span class="c3"><a class="c34" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c01.xhtml%23table1-2&amp;sa=D&amp;source=editors&amp;ust=1681144406291772&amp;usg=AOvVaw39E9FNLhDjwSab2tPJ78z7">Table 1-2</a></span><span class="c2">&nbsp;provides more in-depth information about each of the HTTP request methods.</span></p><p class="c44"><span class="c23 c53">Table 1-2</span><span class="c10 c8">: HTTP Methods</span></p><a id="t.7765e386302fe25b9328a19b21937f7e557a762d"></a><a id="t.1"></a><table class="c11"><tr class="c22"><td class="c55" colspan="1" rowspan="1"><p class="c1"><span class="c19">Method</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c1"><span class="c19">Purpose</span></p></td></tr><tr class="c9"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">GET</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">GET requests attempt to gather resources from the web server. This could be any resource, including a web page, user data, a video, an address, and so on. If the request is successful, the server will provide the resource; otherwise, the server will provide a response explaining why it was unable to get the requested resource.</span></p></td></tr><tr class="c9"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">POST</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">POST requests submit data contained in the body of the request to a web server. This could include client records, requests to transfer money from one account to another, and status updates, for example. If a client submits the same POST request multiple times, the server will create multiple results.</span></p></td></tr><tr class="c35"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">PUT</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">PUT requests instruct the web server to store submitted data under the requested URL. PUT is primarily used to send a resource to a web server. If a server accepts a PUT request, it will add the resource or completely replace the existing resource. If a PUT request is successful, a new URL should be created. If the same PUT request is submitted again, the results should remain the same.</span></p></td></tr><tr class="c37"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">HEAD</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">HEAD requests are similar to GET requests, except they request the HTTP headers only, excluding the message body. This request is a quick way to obtain information about server status and to see if a given URL works.</span></p></td></tr><tr class="c32"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">PATCH</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">PATCH requests are used to partially update resources with the submitted data. PATCH requests are likely only available if an HTTP response includes the </span><span class="c21">Accept-Patch</span><span class="c5 c23">&nbsp;header.</span></p></td></tr><tr class="c37"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">OPTIONS</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">OPTIONS requests are a way for the client to identify all the request methods allowed from a given web server. If the web server responds to an OPTIONS request, it should respond with all allowed request options.</span></p></td></tr><tr class="c37"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">TRACE</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">TRACE requests are primarily used for debugging input sent from the client to the server. TRACE asks the server to echo back the client&rsquo;s original request, which could reveal that a mechanism is altering the client&rsquo;s request before it is processed by the server.</span></p></td></tr><tr class="c32"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">CONNECT</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">CONNECT requests initiate a two-way network connection. When allowed, this request would create a proxy tunnel between the browser and web server.</span></p></td></tr><tr class="c22"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">DELETE</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">DELETE requests ask that the server remove a given resource.</span></p></td></tr></table><p class="c12"><span class="c5">Some methods are </span><span class="c5 c8">idempotent</span><span class="c2">, which means they can be used to send the same request multiple times without changing the state of a resource on a web server. For example, if you perform the operation of turning on a light, then the light turns on. When the switch is already on and you try to flip the switch on again, it remains on&mdash;nothing changes. GET, HEAD, PUT, OPTIONS, and DELETE are idempotent.</span></p><p class="c12"><span class="c5">On the other hand, </span><span class="c5 c8">non-idempotent</span><span class="c2">&nbsp;methods can dynamically change the results of a resource on a server. Non-idempotent methods include POST, PATCH, and CONNECT. POST is the most commonly used method for changing web server resources. POST is used to create new resources on a web server, so if a POST request is submitted 10 times, there will be 10 new resources on the web server. By contrast, if an idempotent method like PUT, typically used to update a resource, is requested 10 times, a single resource will be overwritten 10 times.</span></p><p class="c12"><span class="c2">DELETE is also idempotent, because if the request to delete a resource was sent 10 times, the resource would be deleted only once. The subsequent times, nothing would happen. Web APIs will typically only use POST, GET, PUT, DELETE, with POST as non-idempotent methods.</span></p><h3 class="c26 c23" id="h.f2ofals3cnod"><span class="c20 c18">Stateful and Stateless HTTP</span></h3><p class="c16"><span class="c5">HTTP is a </span><span class="c5 c8">stateless</span><span class="c2">&nbsp;protocol, meaning the server doesn&rsquo;t keep track of information between requests. However, for users to have a persistent and consistent experience with a web application, the web server needs to remember something about the HTTP session with that client. For example, if a user is logged in to their account and adds several items to the shopping cart, the web application needs to keep track of the state of the end user&rsquo;s cart. Otherwise, every time the user navigated to a different web page, the cart would empty again.</span></p><p class="c12"><span class="c5">A </span><span class="c5 c8">stateful connection</span><span class="c5">&nbsp;allows the server to track the client&rsquo;s actions, profile, images, preferences, and so on. Stateful connections use small text files, called </span><span class="c5 c8">cookies</span><span class="c2">, to store information on the client side. Cookies may store site-specific settings, security settings, and authentication-related information. Meanwhile, the server often stores information on itself, in a cache, or on backend databases. To continue their sessions, browsers include the stored cookies in requests to the server, and when hacking web applications, an attacker can impersonate an end user by stealing or forging their cookies.</span></p><p class="c12"><span class="c2">Maintaining a stateful connection with a server has scaling limitations. When a state is maintained between a client and a server, that relationship exists only between the specific browser and the server used when the state was created. If a user switches from, say, using a browser on one computer to using the browser on their mobile device, the client would need to reauthenticate and create a new state with the server. Also, stateful connections require the client to continuously send requests to the server. Challenges start to arise when many clients are maintaining state with the same server. The server can only handle as many stateful connections as allowed by its computing resources. This is much more readily solved by stateless applications.</span></p><p class="c12"><span class="c5 c8">Stateless communications</span><span class="c2">&nbsp;eliminate the need for the server resources required to manage sessions. In stateless communications, the server doesn&rsquo;t store session information, and every stateless request sent must contain all the information necessary for the web server to recognize that the requestor is authorized to access the given resources. These stateless requests can include a key or some form of authorization header to maintain an experience similar to that of a stateful connection. The connections do not store session data on the web app server; instead, they leverage backend databases.</span></p><p class="c12"><span class="c2">In our shopping cart example, a stateless application could track the contents of a user&rsquo;s cart by updating the database or cache based on requests that contain a certain token. The end-user experience would appear the same, but how the web server handles the request is quite a bit different. Since their appearance of state is maintained and the client issues everything needed in a given request, stateless apps can scale without the concern of losing information within a stateful connection. Instead, any number of servers can be used to handle requests as long as all the necessary information is included within the request and that information is accessible on the backend databases.</span></p><p class="c12"><span class="c2">When hacking APIs, an attacker can impersonate an end user by stealing or forging their token. API communications are stateless&mdash;a topic I will explore in further detail in the next chapter.</span></p><h2 class="c26 c23" id="h.cdd25kzf3vgv"><span class="c47 c18">Web Server Databases</span></h2><p class="c16"><span class="c2">Databases allow servers to store and quickly provide resources to clients. For example, any social media platform that allows you to upload status updates, photos, and videos is definitely using databases to save all that content. The social media platform could be maintaining those databases on its own; alternatively, the databases could be provided to the platform as a service.</span></p><p class="c12"><span class="c5">Typically, a web application will store user resources by passing the resources from frontend code to backend databases. The frontend of a web application, which is the part of a web application that a user interacts with, determines its look and feel and includes its buttons, links, videos, and fonts. Frontend code usually includes HTML, CSS, and JavaScript. In addition, the frontend could include web application frameworks like AngularJS, ReactJS, and Bootstrap, to name a few. The </span><span class="c5 c8">backend</span><span class="c2">&nbsp;consists of the technologies that the frontend needs to function. It includes the server, the application, and any databases. Backend programming languages include JavaScript, Python, Ruby, Golang, PHP, Java, C#, and Perl, to name a handful.</span></p><p class="c12"><span class="c5">In a secure web application, there should be no direct interaction between a user and the backend database. Direct access to a database would remove a layer of defense and open up the database to additional attacks. When exposing technologies to end users, a web application provider expands their potential for attack, a metric known as the </span><span class="c5 c8">attack surface</span><span class="c2">. Limiting direct access to a database shrinks the size of the attack surface.</span></p><p class="c12"><span class="c2">Modern web applications use either SQL (relational) databases or NoSQL (nonrelational) databases. Knowing the differences between SQL and NoSQL databases will help you later tailor your API injection attacks.</span></p><h3 class="c26 c23" id="h.lczm5kqf5l1"><span class="c20 c18">SQL</span></h3><p class="c16"><span class="c5 c8">Structured Query Language (SQL)</span><span class="c5">&nbsp;databases are </span><span class="c5 c8">relational databases</span><span class="c5">&nbsp;in which the data is organized in tables. The table&rsquo;s rows, called</span><span class="c5 c8">&nbsp;records</span><span class="c5">, identify the data type, such as username, email address, or privilege level. Its columns are the data&rsquo;s </span><span class="c5 c8">attributes</span><span class="c2">&nbsp;and could include all of the different usernames, email addresses, and privilege levels. In Tables 1-3 through 1-5, UserID, Username, Email, and Privilege are the data types. The rows are the data for the given table.</span></p><p class="c44"><span class="c53 c23">Table 1-3</span><span class="c8 c10">: A Relational User Table</span></p><a id="t.d795c6991d0fd9192c5a69cd4b70460c9a2de614"></a><a id="t.2"></a><table class="c11"><tr class="c22"><td class="c43" colspan="1" rowspan="1"><p class="c1"><span class="c19">UserID</span></p></td><td class="c49" colspan="1" rowspan="1"><p class="c1"><span class="c19">Username</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">111</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">hAPI_hacker</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">112</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">Scuttleph1sh</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">113</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">mysterioushadow</span></p></td></tr></table><p class="c44"><span class="c53 c23">Table 1-4</span><span class="c10 c8">: A Relational Email Table</span></p><a id="t.40083a9d7f891fbf337f84ee028b7dc3bffa3475"></a><a id="t.3"></a><table class="c11"><tr class="c22"><td class="c43" colspan="1" rowspan="1"><p class="c1"><span class="c19">UserID</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c1"><span class="c19">Email</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">111</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23 c8">hapi_hacker@email.com</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">112</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23 c8">scuttleph1sh@email.com</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">113</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23 c8">mysterioushadow@email.com</span></p></td></tr></table><p class="c44"><span class="c53 c23">Table 1-5</span><span class="c10 c8">: A Relational Privilege Table</span></p><a id="t.17b5dff7e412d9acaa2563bcc6faa187e6abe328"></a><a id="t.4"></a><table class="c11"><tr class="c22"><td class="c43" colspan="1" rowspan="1"><p class="c1"><span class="c19">UserID</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c1"><span class="c19">Privilege</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">111</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">admin</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">112</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">partner</span></p></td></tr><tr class="c22"><td class="c36" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">113</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c1"><span class="c5 c23">user</span></p></td></tr></table><p class="c12"><span class="c2">To retrieve data from a SQL database, an application must craft a SQL query. A typical SQL query to find the customer with the identification of 111 would look like this:</span></p><p class="c41"><span class="c14">SELECT * FROM Email WHERE UserID = 111;</span></p><p class="c12"><span class="c5">This query requests all records from the Email table that have the value 111 in the UserID column. </span><span class="c21">SELECT</span><span class="c5">&nbsp;is a statement used to obtain information from the database, the asterisk is a wildcard character that will select all of the columns in a table, </span><span class="c21">FROM</span><span class="c5">&nbsp;is used to determine which table to use, and </span><span class="c21">WHERE</span><span class="c2">&nbsp;is a clause that is used to filter specific results.</span></p><p class="c12"><span class="c2">There are several varieties of SQL databases, but they are queried similarly. SQL databases include MySQL, Microsoft SQL Server, PostgreSQL, Oracle, and MariaDB, among others.</span></p><p class="c12"><span class="c2">In later chapters, I&rsquo;ll cover how to send API requests to detect injection vulnerabilities, such as SQL injection. SQL injection is a classic web application attack that has been plaguing web apps for over two decades yet remains a possible attack method in APIs.</span></p><h3 class="c26 c23" id="h.sogyv9a0tp1a"><span class="c20 c18">NoSQL</span></h3><p class="c16"><span class="c5 c8">NoSQL databases</span><span class="c5">, also known as distributed databases, are </span><span class="c5 c8">nonrelational</span><span class="c2">, meaning they don&rsquo;t follow the structures of relational databases. NoSQL databases are typically open-source tools that handle unstructured data and store data as documents. Instead of relationships, NoSQL databases store information as keys and values. Unlike SQL databases, each type of NoSQL database will have its own unique structures, modes of querying, vulnerabilities, and exploits. Here&rsquo;s a sample query using MongoDB, the current market share leader for NoSQL databases:</span></p><p class="c41"><span class="c14">db.collection.find({&quot;UserID&quot;: 111})</span></p><p class="c12"><span class="c5">In this example, </span><span class="c21">db.collection.find()</span><span class="c2">&nbsp;is a method used to search through a document for information about the UserID with 111 as the value. MongoDB uses several operators that might be useful to know:</span></p><ol class="c59 lst-kix_4oh412crl23x-0 start" start="1"><li class="c23 c31 li-bullet-0"><span class="c21">$eq</span><span class="c2">&nbsp;Matches values that are equal to a specified value</span></li><li class="c31 c23 li-bullet-0"><span class="c21">$gt</span><span class="c2">&nbsp;Matches values that are greater than a specified value</span></li><li class="c31 c23 li-bullet-0"><span class="c21">$lt</span><span class="c2">&nbsp;Matches values that are less than a specified value</span></li><li class="c31 c23 li-bullet-0"><span class="c21">$ne</span><span class="c2">&nbsp;Matches all values that are not equal to a specified value</span></li></ol><p class="c12"><span class="c2">These operators can be used within NoSQL queries to select and filter certain information in a query. For example, we could use the previous command without knowing the exact UserID, like so:</span></p><p class="c41"><span class="c14">db.collection.find({&quot;UserID&quot;: {$gt:110}})</span></p><p class="c12"><span class="c2">This statement would find all UserIDs greater than 110. Understanding these operators will be useful when conducting NoSQL injection attacks later in this book.</span></p><p class="c12"><span class="c2">NoSQL databases include MongoDB, Couchbase, Cassandra, IBM Domino, Oracle NoSQL Database, Redis, and Elasticsearch, among others.</span></p><h2 class="c26 c23" id="h.yefkxdkpvdh1"><span class="c47 c18">How APIs Fit into the Picture</span></h2><p class="c16"><span class="c5">A web application can be made more powerful if it can use the power of other applications. </span><span class="c5 c8">Application programming interfaces (APIs)</span><span class="c5">&nbsp;comprise a technology that facilitates communications between separate applications. In particular, </span><span class="c5 c8">web</span><span class="c2">&nbsp;APIs allow for machine-to-machine communications based on HTTP, providing a common method of connecting different applications together.</span></p><p class="c12"><span class="c2">This ability has opened up a world of opportunities for application providers, as developers no longer have to be experts in every facet of the functionality they want to provide to their end users. For example, let&rsquo;s consider a ridesharing app. The app needs a map to help its drivers navigate cities, a method for processing payments, and a way for drivers and customers to communicate. Instead of specializing in each of these different functions, a developer can leverage the Google Maps API for the mapping function, the Stripe API for payment processing, and the Twilio API to access SMS messaging. The developer can combine these APIs to create a whole new application.</span></p><p class="c12"><span class="c2">The immediate impact of this technology is twofold. First, it streamlines the exchange of information. By using HTTP, web APIs can take advantage of the protocol&rsquo;s standardized methods, status codes, and client/server relationship, allowing developers to write code that can automatically handle the data. Second, APIs allow web application providers to specialize, as they no longer need to create every aspect of their web application.</span></p><p class="c12"><span class="c2">APIs are an incredible technology with a global impact. Yet, as you&rsquo;ll see in the following chapters, they have greatly expanded the attack surface of every application using them on the internet.</span></p><h2 class="c26 c23" id="h.gwg6oc4bd6k8"><span class="c47 c18">Summary</span></h2><p class="c16"><span class="c2">In this chapter we covered the fundamental aspects of web applications. If you understand the general functions of HTTP requests and responses, authentication/authorization, and databases, you will easily be able to understand web APIs, because the underlying technology of web applications is the underlying technology of web APIs. In the next chapter we will examine the anatomy of APIs.</span></p><p class="c12"><span class="c5">This chapter is meant to equip you with just enough information to be dangerous as an API hacker, not as a developer or application architect. If you would like additional resources about web applications, I highly suggest </span><span class="c5 c8">The Web Application Hackers Handbook</span><span class="c5">&nbsp;(Wiley, 2011), </span><span class="c5 c8">Web Application Security</span><span class="c5">&nbsp;(O&rsquo;Reilly, 2020), </span><span class="c5 c8">Web Security for Developers</span><span class="c5">&nbsp;(No Starch Press, 2020), and </span><span class="c5 c8">The Tangled Web</span><span class="c2">&nbsp;(No Starch Press, 2011).</span></p><p class="c13 c15"><span class="c18 c28"></span></p></body></html>
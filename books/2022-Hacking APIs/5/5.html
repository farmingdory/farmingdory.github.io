<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol.lst-kix_8haqykk7gx6u-4.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-4 0}.lst-kix_n8ewokk87a5z-2>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-2,lower-roman) ". "}ol.lst-kix_n8ewokk87a5z-4.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-4 0}ol.lst-kix_n8ewokk87a5z-7.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-7 0}.lst-kix_8haqykk7gx6u-7>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-7}.lst-kix_n8ewokk87a5z-0>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-0,decimal) ". "}.lst-kix_n8ewokk87a5z-0>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-0}.lst-kix_n8ewokk87a5z-1>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-1,lower-latin) ". "}.lst-kix_n8ewokk87a5z-6>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-6,decimal) ". "}ol.lst-kix_8haqykk7gx6u-6{list-style-type:none}ol.lst-kix_8haqykk7gx6u-5{list-style-type:none}ol.lst-kix_8haqykk7gx6u-8.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-8 0}ol.lst-kix_8haqykk7gx6u-8{list-style-type:none}.lst-kix_18h33d46lq2c-1>li:before{content:"\0025cb  "}.lst-kix_n8ewokk87a5z-5>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-5}ol.lst-kix_8haqykk7gx6u-7{list-style-type:none}ol.lst-kix_8haqykk7gx6u-2{list-style-type:none}ol.lst-kix_8haqykk7gx6u-1{list-style-type:none}.lst-kix_n8ewokk87a5z-3>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-3,decimal) ". "}.lst-kix_n8ewokk87a5z-7>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-7,lower-latin) ". "}ol.lst-kix_8haqykk7gx6u-4{list-style-type:none}.lst-kix_18h33d46lq2c-0>li:before{content:"\0025cf  "}.lst-kix_n8ewokk87a5z-6>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-6}.lst-kix_8haqykk7gx6u-0>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-0}ol.lst-kix_8haqykk7gx6u-3{list-style-type:none}.lst-kix_8haqykk7gx6u-1>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-1,lower-latin) ". "}.lst-kix_8haqykk7gx6u-0>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-0,decimal) ". "}ol.lst-kix_8haqykk7gx6u-0{list-style-type:none}ol.lst-kix_8haqykk7gx6u-0.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-0 0}.lst-kix_n8ewokk87a5z-4>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-4,lower-latin) ". "}.lst-kix_8haqykk7gx6u-6>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-6}ol.lst-kix_n8ewokk87a5z-1.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-1 0}.lst-kix_n8ewokk87a5z-5>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-5,lower-roman) ". "}.lst-kix_8haqykk7gx6u-8>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-8}ol.lst-kix_n8ewokk87a5z-8.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-8 0}.lst-kix_8haqykk7gx6u-5>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-5}.lst-kix_n8ewokk87a5z-7>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-7}.lst-kix_n8ewokk87a5z-1>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-1}ol.lst-kix_8haqykk7gx6u-7.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-7 0}.lst-kix_8haqykk7gx6u-2>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-2}ol.lst-kix_n8ewokk87a5z-5.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-5 0}ol.lst-kix_8haqykk7gx6u-1.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-1 0}.lst-kix_n8ewokk87a5z-4>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-4}ul.lst-kix_18h33d46lq2c-4{list-style-type:none}ol.lst-kix_n8ewokk87a5z-2.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-2 0}ul.lst-kix_18h33d46lq2c-5{list-style-type:none}ul.lst-kix_18h33d46lq2c-2{list-style-type:none}ul.lst-kix_18h33d46lq2c-3{list-style-type:none}ul.lst-kix_18h33d46lq2c-0{list-style-type:none}ul.lst-kix_18h33d46lq2c-1{list-style-type:none}ol.lst-kix_8haqykk7gx6u-6.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-6 0}.lst-kix_n8ewokk87a5z-3>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-3}.lst-kix_8haqykk7gx6u-4>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-4}.lst-kix_n8ewokk87a5z-8>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-8}ol.lst-kix_8haqykk7gx6u-2.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-2 0}.lst-kix_8haqykk7gx6u-3>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-3}.lst-kix_n8ewokk87a5z-2>li{counter-increment:lst-ctn-kix_n8ewokk87a5z-2}ol.lst-kix_n8ewokk87a5z-6.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-6 0}.lst-kix_18h33d46lq2c-7>li:before{content:"\0025cb  "}ol.lst-kix_n8ewokk87a5z-5{list-style-type:none}ol.lst-kix_8haqykk7gx6u-5.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-5 0}ol.lst-kix_n8ewokk87a5z-6{list-style-type:none}ol.lst-kix_n8ewokk87a5z-3{list-style-type:none}ol.lst-kix_n8ewokk87a5z-4{list-style-type:none}.lst-kix_18h33d46lq2c-4>li:before{content:"\0025cb  "}.lst-kix_18h33d46lq2c-8>li:before{content:"\0025a0  "}ol.lst-kix_n8ewokk87a5z-7{list-style-type:none}ol.lst-kix_n8ewokk87a5z-8{list-style-type:none}.lst-kix_18h33d46lq2c-3>li:before{content:"\0025cf  "}.lst-kix_8haqykk7gx6u-2>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-2,lower-roman) ". "}.lst-kix_n8ewokk87a5z-8>li:before{content:"" counter(lst-ctn-kix_n8ewokk87a5z-8,lower-roman) ". "}.lst-kix_8haqykk7gx6u-3>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-3,decimal) ". "}ol.lst-kix_n8ewokk87a5z-3.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-3 0}ol.lst-kix_8haqykk7gx6u-3.start{counter-reset:lst-ctn-kix_8haqykk7gx6u-3 0}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_18h33d46lq2c-2>li:before{content:"\0025a0  "}.lst-kix_8haqykk7gx6u-5>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-5,lower-roman) ". "}.lst-kix_8haqykk7gx6u-4>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-4,lower-latin) ". "}.lst-kix_8haqykk7gx6u-6>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-6,decimal) ". "}ol.lst-kix_n8ewokk87a5z-0.start{counter-reset:lst-ctn-kix_n8ewokk87a5z-0 0}.lst-kix_8haqykk7gx6u-8>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-8,lower-roman) ". "}.lst-kix_8haqykk7gx6u-1>li{counter-increment:lst-ctn-kix_8haqykk7gx6u-1}.lst-kix_18h33d46lq2c-5>li:before{content:"\0025a0  "}ul.lst-kix_18h33d46lq2c-8{list-style-type:none}ol.lst-kix_n8ewokk87a5z-1{list-style-type:none}.lst-kix_8haqykk7gx6u-7>li:before{content:"" counter(lst-ctn-kix_8haqykk7gx6u-7,lower-latin) ". "}ol.lst-kix_n8ewokk87a5z-2{list-style-type:none}.lst-kix_18h33d46lq2c-6>li:before{content:"\0025cf  "}ul.lst-kix_18h33d46lq2c-6{list-style-type:none}ul.lst-kix_18h33d46lq2c-7{list-style-type:none}ol.lst-kix_n8ewokk87a5z-0{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c3{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c42{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c21{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c25{border-right-style:solid;padding-top:6pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.125;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c28{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c18{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.75;border-top-style:solid;margin-left:54pt;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c48{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:142.5pt;border-top-color:#000000;border-bottom-style:solid}.c47{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:187.5pt;border-top-color:#000000;border-bottom-style:solid}.c31{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:62.2pt;border-top-color:#000000;border-bottom-style:solid}.c30{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:72.8pt;border-top-color:#000000;border-bottom-style:solid}.c22{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:141.8pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:187.5pt;border-top-color:#000000;border-bottom-style:solid}.c45{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:96pt;border-top-color:#000000;border-bottom-style:solid}.c10{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:96pt;border-top-color:#000000;border-bottom-style:solid}.c19{border-right-style:solid;padding:11pt 11pt 11pt 11pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:142.5pt;border-top-color:#000000;border-bottom-style:solid}.c0{background-color:#ffffff;color:#3d3b49;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c1{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:12pt;font-family:"Times New Roman";font-style:italic}.c37{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none;font-size:9pt;font-family:"Times New Roman"}.c24{-webkit-text-decoration-skip:none;color:#d3002d;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:9pt;font-family:"Times New Roman"}.c29{padding-top:24pt;padding-bottom:24pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c16{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c5{padding-top:24pt;padding-bottom:42pt;line-height:1.75;orphans:2;widows:2;text-align:left}.c40{padding-top:18pt;padding-bottom:18pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c43{background-color:#000000;color:#ffffff;font-weight:700;font-size:10pt;font-family:"Arial"}.c38{background-color:#000000;color:#ffffff;font-weight:700;font-size:23.5pt;font-family:"Times New Roman"}.c11{background-color:#eef2f6;font-size:12pt;font-family:"Courier New";color:#188038;font-weight:400}.c15{background-color:#eef2f6;font-size:12pt;font-family:"Courier New";color:#3d3b49;font-weight:400}.c6{color:#3d3b49;font-weight:700;font-size:23.5pt;font-family:"Times New Roman"}.c2{font-size:12pt;font-family:"Times New Roman";color:#3d3b49;font-weight:400}.c46{color:#3d3b49;font-weight:700;font-size:40.5pt;font-family:"Times New Roman"}.c36{border-spacing:0;border-collapse:collapse;margin-right:auto}.c20{color:#3d3b49;font-weight:400;font-size:9pt;font-family:"Times New Roman"}.c33{color:#3d3b49;font-weight:700;font-size:14.5pt;font-family:"Times New Roman"}.c17{font-size:12pt;font-family:"Times New Roman";color:#3d3b49;font-weight:700}.c49{color:#3d3b49;font-weight:700;font-size:54pt;font-family:"Times New Roman"}.c23{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial"}.c34{font-size:12pt;color:#3d3b49;font-weight:700}.c4{text-decoration:none;vertical-align:baseline;font-style:normal}.c12{text-decoration:none;vertical-align:baseline}.c44{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c26{color:inherit;text-decoration:inherit}.c32{padding:0;margin:0}.c39{background-color:#eef2f6;font-family:"Courier New"}.c13{vertical-align:baseline}.c7{text-indent:12pt}.c9{font-style:italic}.c41{height:11pt}.c27{height:42pt}.c8{background-color:#ffffff}.c35{height:63pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c8 c44 doc-content"><h1 class="c21" id="h.cs6tp5pvuz2i"><span class="c4 c8 c49">5</span></h1><h1 class="c21" id="h.cs6tp5pvuz2i-1"><span class="c4 c8 c46">SETTING UP VULNERABLE API TARGETS</span></h1><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 610.67px; height: 800.00px;"><img alt="" src="images/image2.png" style="width: 610.67px; height: 800.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2 c4">In this chapter, you&rsquo;ll build your own API target lab to attack in subsequent chapters. By targeting a system you control, you&rsquo;ll be able to safely practice your techniques and see their impacts from both the offensive and defensive perspectives. You&rsquo;ll also be able to make mistakes and experiment with exploits you may not yet be comfortable with using in real engagements.</span></p><p class="c3 c7"><span class="c2 c4">You&rsquo;ll be targeting these machines throughout the lab sections in this book to find out how tools work, discover API weaknesses, learn to fuzz inputs, and exploit all your findings. The lab will have vulnerabilities well beyond what is covered in this book, so I encourage you to seek them out and develop new skills through experimentation.</span></p><p class="c3 c7"><span class="c2 c4">This chapter walks you through setting up prerequisites in a Linux host, installing Docker, downloading and launching the three vulnerable systems that will be used as our targets, and finding additional resources for API hacking targets.</span></p><h2 class="c28" id="h.y43zdnyndin2"><span class="c4 c43">NOTE</span></h2><p class="c42"><span class="c2 c9 c8 c12">This lab contains deliberately vulnerable systems. These could attract attackers and introduce new risks to your home or work networks. Do not connect these machines to the rest of your network; make sure the hacking lab is isolated and protected. In general, be aware of where you host a network of vulnerable machines.</span></p><h2 class="c21 c8" id="h.6fa7zpyhm3x9"><span class="c6 c4">Creating a Linux Host</span></h2><p class="c3"><span class="c2 c4">You&rsquo;ll need a host system to be able to run vulnerable applications. For the sake of simplicity, I recommend keeping the vulnerable applications on different host systems. When they are hosted together, you could run into conflicts in the resources the applications use, and an attack on one vulnerable web app could affect the others. It is easier to be able to have each vulnerable app on its own host system.</span></p><p class="c3 c7"><span class="c2 c4">I recommend using a recent Ubuntu image hosted either on a hypervisor (such as VMware, Hyper-V, or VirtualBox) or in the cloud (such as AWS, Azure, or Google Cloud). The basics of setting up host systems and networking them together is beyond the scope of this book and is widely covered elsewhere. You can find many excellent free guides out there for setting up the basics of a home or cloud hacking lab. Here are a few I recommend:</span></p><ol class="c32 lst-kix_n8ewokk87a5z-0 start" start="1"><li class="c18 c8 li-bullet-0"><span class="c2">Cybrary, &ldquo;Tutorial: Setting Up a Virtual Pentesting Lab at Home,&rdquo; </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://www.cybrary.it/blog/0p3n/tutorial-for-setting-up-a-virtual-penetration-testing-lab-at-your-home&amp;sa=D&amp;source=editors&amp;ust=1681144438810114&amp;usg=AOvVaw1MauzI-q6GmhHNsI1QlS11">https://www.cybrary.it/blog/0p3n/tutorial-for-setting-up-a-virtual-penetration-testing-lab-at-your-home</a></span></li><li class="c8 c18 li-bullet-0"><span class="c2">Black Hills Information Security, &ldquo;Webcast: How to Build a Home Lab,&rdquo; </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://www.blackhillsinfosec.com/webcast-how-to-build-a-home-lab&amp;sa=D&amp;source=editors&amp;ust=1681144438810585&amp;usg=AOvVaw0yBkAb545u0KP8mhmCTPP_">https://www.blackhillsinfosec.com/webcast-how-to-build-a-home-lab</a></span></li><li class="c18 c8 li-bullet-0"><span class="c2">Null Byte, &ldquo;How to Create a Virtual Hacking Lab,&rdquo; </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://null-byte.wonderhowto.com/how-to/hack-like-pro-create-virtual-hacking-lab-0157333&amp;sa=D&amp;source=editors&amp;ust=1681144438811034&amp;usg=AOvVaw2gaWYYezy0XUF-3ybOlyuH">https://null-byte.wonderhowto.com/how-to/hack-like-pro-create-virtual-hacking-lab-0157333</a></span></li><li class="c18 c8 li-bullet-0"><span class="c2">Hacking Articles, &ldquo;Web Application Pentest Lab Setup on AWS,&rdquo; </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://www.hackingarticles.in/web-application-pentest-lab-setup-on-aws&amp;sa=D&amp;source=editors&amp;ust=1681144438811430&amp;usg=AOvVaw0CyHdAE7XkXeVoGHlQ5FLz">https://www.hackingarticles.in/web-application-pentest-lab-setup-on-aws</a></span></li></ol><p class="c3"><span class="c2 c4">Use these guides to set up your Ubuntu machine.</span></p><h2 class="c21 c8" id="h.r6a5l9l8hho4"><span class="c6 c4">Installing Docker and Docker Compose</span></h2><p class="c3"><span class="c2 c4">Once you&rsquo;ve configured your host operating system, you can use Docker to host the vulnerable applications in the form of containers. Docker and Docker Compose will make it incredibly easy to download the vulnerable apps and launch them within a few minutes.</span></p><p class="c3 c7"><span class="c2">Follow the official instructions at </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://docs.docker.com/engine/install/ubuntu&amp;sa=D&amp;source=editors&amp;ust=1681144438812236&amp;usg=AOvVaw0YIU6b8v_uvJACMcOKSt-_">https://docs.docker.com/engine/install/ubuntu</a></span><span class="c2 c4">&nbsp;to install Docker on your Linux host. You&rsquo;ll know that Docker Engine is installed correctly when you can run the hello-world image:</span></p><p class="c40"><span class="c15">$ </span><span class="c34 c4 c39">sudo docker run hello-world</span></p><p class="c3 c7"><span class="c2 c4">If you can run the hello-world container, you have successfully set up Docker. Congrats! Otherwise, you can troubleshoot using the official Docker instructions.</span></p><p class="c3 c7"><span class="c2">Docker Compose is a tool that will enable you to run multiple containers from a YAML file. Depending on your hacking lab setup, Docker Compose could allow you to launch your vulnerable systems with the simple command </span><span class="c11">docker-compose up</span><span class="c2">. The official documentation for installing Docker Compose can be found at </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://docs.docker.com/compose/install&amp;sa=D&amp;source=editors&amp;ust=1681144438813038&amp;usg=AOvVaw0s91EEcOooyzZZbxuDawll">https://docs.docker.com/compose/install</a></span><span class="c2 c4">.</span></p><h2 class="c21 c8" id="h.joke0w5152hj"><span class="c6 c4">Installing Vulnerable Applications</span></h2><p class="c3"><span class="c2 c4">I have selected these vulnerable applications to run in the lab: OWASP crAPI, OWASP Juice Shop, OWASP DevSlop&rsquo;s Pixi, and Damn Vulnerable GraphQL. These apps will help you develop essential API hacking skills such as discovering APIs, fuzzing, configuring parameters, testing authentication, discovering OWASP API Security Top 10 vulnerabilities, and attacking discovered vulnerabilities. This section describes how to set up these applications.</span></p><h3 class="c8 c21" id="h.xflci6rsb6r8"><span class="c4 c33">The completely ridiculous API (crAPI)</span></h3><p class="c3"><span class="c2">The completely ridiculous API, shown in </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-1&amp;sa=D&amp;source=editors&amp;ust=1681144438813849&amp;usg=AOvVaw0RQ2VXbMf2XwO7xp613qMC">Figure 5-1</a></span><span class="c2 c4">, is the vulnerable API developed and released by the OWASP API Security Project. As noted in the acknowledgments of this book, this project was led by Inon Shkedy, Erez Yalon, and Paulo Silva. The crAPI vulnerable API was designed to demonstrate the most critical API vulnerabilities. We will focus on hacking crAPI during most of our labs.</span></p><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 474.67px;"><img alt="Screenshot of the crAPI web interface showing an online shop page with two items for sale and an available balance of $100" src="images/image6.png" style="width: 624.00px; height: 474.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25"><span class="c9 c8 c24">Figure 5-1</span><span class="c20 c12 c9 c8">: The crAPI shop</span></p><p class="c3 c7"><span class="c2">Download and deploy crAPI (</span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://github.com/OWASP/crAPI&amp;sa=D&amp;source=editors&amp;ust=1681144438814438&amp;usg=AOvVaw0uRANbDnfY0Wv1hAulobD0">https://github.com/OWASP/crAPI</a></span><span class="c2 c4">) by running the following commands from an Ubuntu terminal:</span></p><p class="c16"><span class="c15 c4">$ curl -o docker-compose.yml https://raw.githubusercontent.com/OWASP/crAPI/main/deploy/docker/docker-compose.yml</span></p><p class="c16"><span class="c15 c4">$ sudo docker-compose pull</span></p><p class="c40"><span class="c15 c4">$ sudo docker-compose -f docker-compose.yml --compatibility up -d</span></p><p class="c3 c7"><span class="c2 c4">The crAPI application contains a modern web application, an API, and a Mail Hog email server. In this application, you can shop for vehicle parts, use the community chat feature, and link a vehicle to find local repair shops. The crAPI app was built with realistic implementations of the OWASP API Security Top 10 vulnerabilities. You will learn quite a bit from this one.</span></p><h3 class="c21 c8" id="h.r4q8unhxt6u"><span class="c33 c4">OWASP DevSlop&rsquo;s Pixi</span></h3><p class="c3"><span class="c2">Pixi is a MongoDB, Express.js, Angular, Node (MEAN) stack web application that was designed with deliberately vulnerable APIs (see </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-2&amp;sa=D&amp;source=editors&amp;ust=1681144438815428&amp;usg=AOvVaw1TlBwmIAq8rBXpb2ZDTNEx">Figure 5-2</a></span><span class="c2 c4">). It was created at OWASP DevSlop, an OWASP incubator project that highlights DevOps-related mistakes, by Nicole Becher, Nancy Garich&eacute;, Mordecai Kraushar, and Tanya Janca.</span></p><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 344.00px;"><img alt="Screenshot of Pixi&rsquo;s login interface, with email and password fields" src="images/image7.png" style="width: 624.00px; height: 344.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25"><span class="c24 c9 c8">Figure 5-2</span><span class="c20 c12 c9 c8">: The Pixi landing page</span></p><p class="c3 c7"><span class="c2 c4">You can think of the Pixi application as a social media platform with a virtual payment system. As an attacker, you&rsquo;ll find Pixi&rsquo;s user information, administrative functionality, and payment system especially interesting.</span></p><p class="c3 c7"><span class="c2 c4">Another great feature of Pixi is that it is very easy to get up and running. Run the following commands:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">git clone https://github.com/DevSlop/Pixi.git</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">cd Pixi</span></p><p class="c40"><span class="c15">$ </span><span class="c34 c4 c39">sudo docker-compose up</span></p><p class="c3 c7"><span class="c2">Then use a browser and visit </span><span class="c2 c9">http://localhost:8000 </span><span class="c2">to see the landing page.</span><span class="c17">&nbsp;</span><span class="c2 c4">If Docker and Docker Compose have been set up, as described previously in this chapter, launching Pixi should really be as easy as that.</span></p><h3 class="c21 c8" id="h.jvc7sr8b4whm"><span class="c33 c4">OWASP Juice Shop</span></h3><p class="c3"><span class="c2">OWASP Juice Shop, shown in </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-3&amp;sa=D&amp;source=editors&amp;ust=1681144438816957&amp;usg=AOvVaw0PqwOGWyJNpmQbe4VbpyB3">Figure 5-3</a></span><span class="c2 c4">, is an OWASP flagship project created by Bj&ouml;rn Kimminich. It&rsquo;s designed to include vulnerabilities from both the OWASP Top 10 and OWASP API Security Top 10. One awesome feature found in Juice Shop is that it tracks your hacking progress and includes a hidden scoreboard. Juice Shop was built using Node.js, Express, and Angular. It is a JavaScript application powered by REST APIs.</span></p><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 617.33px; height: 544.00px;"><img alt="Screenshot of the OWASP Juice Shop web page with four items for sale: apple juice, apple pomace, banana juice, and carrot juice" src="images/image4.png" style="width: 617.33px; height: 544.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25"><span class="c24 c9 c8">Figure 5-3</span><span class="c20 c12 c9 c8">: The OWASP Juice Shop</span></p><p class="c3 c7"><span class="c2 c4">Of all the applications we&rsquo;ll install, Juice Shop is currently the most supported, with over 70 contributors. To download and launch Juice Shop, run the following commands:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">docker pull bkimminich/juice-shop</span></p><p class="c40"><span class="c15">$ </span><span class="c34 c4 c39">docker run --rm -p 80:3000 bkimminich/juice-shop</span></p><p class="c3 c7"><span class="c2">Juice Shop and Damn Vulnerable GraphQL Application (DVGA) both run over port 3000 by default. To avoid conflict, the </span><span class="c11">-p 80:3000</span><span class="c2">&nbsp;argument in the </span><span class="c11">docker-run</span><span class="c2 c4">&nbsp;command sets Juice Shop up to run over port 80 instead.</span></p><p class="c3 c7"><span class="c2">To access Juice Shop, browse to </span><span class="c2 c9">http://localhost</span><span class="c2">. (On macOS and Windows, browse to </span><span class="c2 c9">http://192.168.99.100</span><span class="c2 c4">&nbsp;if you are using Docker Machine instead of the native Docker installation.)</span></p><h3 class="c21 c8" id="h.gp734k7jzywf"><span class="c33 c4">Damn Vulnerable GraphQL Application</span></h3><p class="c3"><span class="c2">DVGA is a deliberately vulnerable GraphQL application developed by Dolev Farhi and Connor McKinnon. I&rsquo;m including DVGA in this lab because of GraphQL&rsquo;s increasing popularity and adoption by organizations such as Facebook, Netflix, AWS, and IBM. Additionally, you may be surprised by how often a GraphQL integrated development environment (IDE) is exposed for all to use. GraphiQL is one of the more popular GraphQL IDEs you will come across. Understanding how to take advantage of the GraphiQL IDE will prepare you to interact with other GraphQL APIs with or without a friendly user interface (see </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-4&amp;sa=D&amp;source=editors&amp;ust=1681144438818554&amp;usg=AOvVaw3ECwdIP2iYzJ5Swwm-CiKq">Figure 5-4</a></span><span class="c2 c4">).</span></p><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 226.67px;"><img alt="Screenshot of the GraphiQL IDE" src="images/image1.png" style="width: 624.00px; height: 226.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25"><span class="c24 c9 c8">Figure 5-4</span><span class="c20 c12 c9 c8">: The GraphiQL IDE web page hosted on port 5000</span></p><p class="c3 c7"><span class="c2 c4">To download and launch DVGA, run the following commands from your Ubuntu host terminal:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">sudo docker pull dolevf/dvga</span></p><p class="c40"><span class="c15">$ </span><span class="c34 c4 c39">sudo docker run -t -p 5000:5000 -e WEB_HOST=0.0.0.0 dolevf/dvga</span></p><p class="c3 c7"><span class="c2">To access it, use a browser and visit </span><span class="c2 c9">http://localhost:5000</span><span class="c2 c4">.</span></p><h2 class="c21 c8" id="h.hp4cd7u36xcs"><span class="c6 c4">Adding Other Vulnerable Apps</span></h2><p class="c3"><span class="c2">If you are interested in an additional challenge, you can add other machines to your API hacking lab. GitHub is a great source of deliberately vulnerable APIs to bolster your lab. </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23table5-1&amp;sa=D&amp;source=editors&amp;ust=1681144438819725&amp;usg=AOvVaw3xkICGT51DYneWV2YcXl38">Table 5-1</a></span><span class="c2 c4">&nbsp;lists a few more systems with vulnerable APIs you can easily clone from GitHub.</span></p><p class="c25"><span class="c37 c8">Table 5-1</span><span class="c20 c12 c9 c8">: Additional Systems with Vulnerable APIs</span></p><a id="t.c0fe6ccad07a3082343fc9ac574f9cf6b1e7a382"></a><a id="t.0"></a><table class="c36"><tr class="c27"><td class="c48" colspan="1" rowspan="1"><p class="c5"><span class="c8 c34">Name</span></p></td><td class="c45" colspan="1" rowspan="1"><p class="c5"><span class="c34 c8">Contributor</span></p></td><td class="c47" colspan="1" rowspan="1"><p class="c5"><span class="c34 c8">GitHub URL</span></p></td></tr><tr class="c27"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">VAmPI</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Erev0s</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/erev0s/VAmPI&amp;sa=D&amp;source=editors&amp;ust=1681144438821836&amp;usg=AOvVaw1mMX649wbpi7oLLncVgDYF">https://github.com/erev0s/VAmPI</a></span></p></td></tr><tr class="c35"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">DVWS-node</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Snoopysecurity</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/snoopysecurity/dvws-node&amp;sa=D&amp;source=editors&amp;ust=1681144438822991&amp;usg=AOvVaw33DoFPPSnD9St_EWMcioNM">https://github.com/snoopysecurity/dvws-node</a></span></p></td></tr><tr class="c35"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">DamnVulnerable MicroServices</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">ne0z</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/ne0z/DamnVulnerableMicroServices&amp;sa=D&amp;source=editors&amp;ust=1681144438824638&amp;usg=AOvVaw3KoagGI4glJg-148kcPVTl">https://github.com/ne0z/DamnVulnerableMicroServices</a></span></p></td></tr><tr class="c35"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Node-API-goat</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Layro01</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/layro01/node-api-goat&amp;sa=D&amp;source=editors&amp;ust=1681144438825705&amp;usg=AOvVaw3EAEY0QYHgdXC5QpAOmEwG">https://github.com/layro01/node-api-goat</a></span></p></td></tr><tr class="c35"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Vulnerable GraphQL API</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">AidanNoll</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/CarveSystems/vulnerable-graphql-api&amp;sa=D&amp;source=editors&amp;ust=1681144438826971&amp;usg=AOvVaw2teJhBNuA48Z0pbA1Ojv9_">https://github.com/CarveSystems/vulnerable-graphql-api</a></span></p></td></tr><tr class="c35"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Generic-University</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">InsiderPhD</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/InsiderPhD/Generic-University&amp;sa=D&amp;source=editors&amp;ust=1681144438828103&amp;usg=AOvVaw0YLNgAkHARS2Ma_-7xyFIM">https://github.com/InsiderPhD/Generic-University</a></span></p></td></tr><tr class="c35"><td class="c19" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">vulnapi</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">tkisason</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c5"><span class="c1 c8"><a class="c26" href="https://www.google.com/url?q=https://github.com/tkisason/vulnapi&amp;sa=D&amp;source=editors&amp;ust=1681144438829153&amp;usg=AOvVaw07TYuY0KhOhAfqVaoX3pGu">https://github.com/tkisason/vulnapi</a></span></p></td></tr></table><h2 class="c21 c8" id="h.uuiwfiojz7hk"><span class="c4 c6">Hacking APIs on TryHackMe and HackTheBox</span></h2><p class="c3"><span class="c2">TryHackMe (</span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://tryhackme.com/&amp;sa=D&amp;source=editors&amp;ust=1681144438829833&amp;usg=AOvVaw1Ox0c8Eh4XvxxvUi9DziFe">https://tryhackme.com</a></span><span class="c2">) and HackTheBox (</span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://www.hackthebox.com/&amp;sa=D&amp;source=editors&amp;ust=1681144438830134&amp;usg=AOvVaw3soGzOV5_8b_mGEsKZ9Gn8">https://www.hackthebox.com</a></span><span class="c2 c4">) are web platforms that allow you to hack vulnerable machines, participate in capture-the-flag (CTF) competitions, solve hacking challenges, and climb hacking leaderboards. TryHackMe has some free content and much more content for a monthly subscription fee. You can deploy its prebuilt hacking machines over a web browser and attack them. It includes several great machines with vulnerable APIs:</span></p><ul class="c32 lst-kix_18h33d46lq2c-0 start"><li class="c18 c8 li-bullet-0"><span class="c2 c4">Bookstore (free)</span></li><li class="c18 c8 li-bullet-0"><span class="c2 c4">Carpe Diem 1 (free)</span></li><li class="c18 c8 li-bullet-0"><span class="c2 c4">ZTH: Obscure Web Vulns (paid)</span></li><li class="c18 c8 li-bullet-0"><span class="c2 c4">ZTH: Web2 (paid)</span></li><li class="c18 c8 li-bullet-0"><span class="c2 c4">GraphQL (paid)</span></li></ul><p class="c3 c7"><span class="c2 c4">These vulnerable TryHackMe machines cover many of the basic approaches to hacking REST APIs, GraphQL APIs, and common API authentication mechanisms. If you&rsquo;re new to hacking, TryHackMe has made deploying an attacking machine as simple as clicking Start Attack Box. Within a few minutes, you&rsquo;ll have a browser-based attacking machine with many of the tools we will be using throughout this book.</span></p><p class="c3 c7"><span class="c2 c4">HackTheBox (HTB) also has free content and a subscription model but assumes you already have basic hacking skills. For example, HTB does not currently provide users with attacking machine instances, so it requires you to come prepared with your own attacking machine. In order to use HTB at all, you need to be able to take on its challenge and hack its invitation code process to gain entry.</span></p><p class="c3 c7"><span class="c2 c4">The primary difference between the HTB free tier and its paid tier is access to vulnerable machines. With free access, you&rsquo;ll have access to the 20 most recent vulnerable machines, which may include an API-related system. However, if you want access to HTB&rsquo;s library of vulnerable machines with API vulnerabilities, you will need to pay for a VIP membership that lets you access its retired machines.</span></p><p class="c3 c7"><span class="c2">The retired machines listed in </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23table5-2&amp;sa=D&amp;source=editors&amp;ust=1681144438831292&amp;usg=AOvVaw0Yih_JmDacRqV_pVpYYxmo">Table 5-2</a></span><span class="c2 c4">&nbsp;all include aspects of API hacking.</span></p><p class="c25"><span class="c8 c37">Table 5-2</span><span class="c20 c12 c9 c8">: Retired Machines with API Hacking Components</span></p><a id="t.857adb030fe6fbc94050f285e885177d3ceb6c64"></a><a id="t.1"></a><table class="c36"><tr class="c27"><td class="c30" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Craft</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Postman</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Smasher2</span></p></td></tr><tr class="c27"><td class="c30" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">JSON</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Node</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Help</span></p></td></tr><tr class="c27"><td class="c30" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">PlayerTwo</span></p></td><td class="c31" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Luke</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c5"><span class="c2 c8">Playing with Dirty Socks</span></p></td></tr></table><p class="c3 c7"><span class="c2 c4">HTB provides one of the best ways to improve your hacking skills and expand your hacking lab experience beyond your own firewall. Outside of the HTB machines, challenges such as Fuzzy can help you improve critical API hacking skills.</span></p><p class="c3 c7"><span class="c2 c4">Web platforms like TryHackMe and HackTheBox are great supplements to your hacking lab and will help boost your API hacking abilities. When you&rsquo;re not out hacking in the real world, you should keep your skills sharp with CTF competitions like these.</span></p><h2 class="c21 c8" id="h.qr9o7tmn2h3b"><span class="c6 c4">Summary</span></h2><p class="c3"><span class="c2 c4">In this chapter, I guided you through setting up your own set of vulnerable applications that you can host in a home lab. As you learn new skills, the applications in this lab will serve as a place to practice finding and exploiting API vulnerabilities. With these vulnerable apps running in your home lab, you will be able to follow along with the tools and techniques used in the following chapters and lab exercises. I encourage you to go beyond my recommendations and learn new things on your own by expanding or adventuring beyond this API hacking lab.</span></p><h2 class="c21 c8" id="h.djq6dx52aymi"><span class="c4 c38">Lab #2: Finding Your Vulnerable APIs</span></h2><p class="c3"><span class="c2 c4">Let&rsquo;s get your fingers on the keyboard. In this lab, we&rsquo;ll use some basic Kali tools to discover and interact with the vulnerable APIs you just set up. We&rsquo;ll search for the Juice Shop lab application on our local network using Netdiscover, Nmap, Nikto, and Burp Suite.</span></p><h2 class="c28" id="h.49em4soh6ht0"><span class="c43 c4">NOTE</span></h2><p class="c42"><span class="c2 c12 c9 c8">This lab assumes you&rsquo;ve hosted the vulnerable applications on your local network or on a hypervisor. If you&rsquo;ve set up this lab in the cloud, you won&rsquo;t need to discover the IP address of the host system, as you should have that information.</span></p><p class="c3 c7"><span class="c2 c4">Before powering up your lab, I recommend getting a sense of what devices can be found on your network. Use Netdiscover before starting up the vulnerable lab and after you have the lab started:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">sudo netdiscover</span></p><p class="c16"><span class="c15 c4">Currently scanning: 172.16.129.0/16 &nbsp; | &nbsp; Screen View: Unique Hosts</span></p><p class="c16 c41"><span class="c15 c4"></span></p><p class="c16"><span class="c15 c4">&nbsp;13 Captured ARP Req/Rep packets, from 4 hosts. &nbsp; Total size: 780</span></p><p class="c16 c41"><span class="c15 c4"></span></p><p class="c16"><span class="c15 c4">------------------------------------------------------------------------------</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp;IP &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;At MAC Address &nbsp; &nbsp; Count &nbsp; &nbsp; Len &nbsp;MAC Vendor / Hostname</span></p><p class="c16"><span class="c15 c4">------------------------------------------------------------------------------</span></p><p class="c16"><span class="c15 c4">&nbsp;192.168.195.2 &nbsp; 00:50:56:f0:23:20 &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp; 360 &nbsp;VMware, Inc.</span></p><p class="c16"><span class="c15 c4">&nbsp;192.168.195.130 00:0c:29:74:7c:5d &nbsp; &nbsp; &nbsp;4 &nbsp; &nbsp; 240 &nbsp;VMware, Inc.</span></p><p class="c16"><span class="c15">&nbsp;</span><span class="c34 c39">192.168.195.132 00:0c:29:85:40:c0 &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; 120 &nbsp;VMware, Inc.</span></p><p class="c40"><span class="c15 c4">&nbsp;192.168.195.254 00:50:56:ed:c0:7c &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp;60 &nbsp;VMware, Inc.</span></p><p class="c3 c7"><span class="c2 c4">You should see a new IP address appear on the network. Once you&rsquo;ve discovered the vulnerable lab IP, you can use CTRL-C to stop Netdiscover.</span></p><p class="c3 c7"><span class="c2 c4">Now that you have the IP address of the vulnerable host, find out what services and ports are in use on that virtual device with a simple Nmap command:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">nmap 192.168.195.132</span></p><p class="c16"><span class="c15 c4">Nmap scan report for 192.168.195.132</span></p><p class="c16"><span class="c15 c4">Host is up (0.00046s latency).</span></p><p class="c16"><span class="c15 c4">Not shown: 999 closed ports</span></p><p class="c16"><span class="c15 c4">PORT &nbsp; &nbsp; &nbsp; &nbsp; STATE &nbsp; &nbsp; &nbsp; &nbsp; SERVICE</span></p><p class="c16"><span class="c15 c4">3000/tcp &nbsp; &nbsp; open &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ppp</span></p><p class="c16 c41"><span class="c15 c4"></span></p><p class="c40"><span class="c15 c4">Nmap done: 1 IP address (1 host up) scanned in 0.14 seconds</span></p><p class="c3 c7"><span class="c2">We can see that the targeted IP address has only port 3000 open (which matches up with what we&rsquo;d expect based on our initial setup of Juice Shop). To find out more information about the target, we can add the </span><span class="c11">-sC </span><span class="c2">and </span><span class="c11">-sV</span><span class="c2 c4">&nbsp;flags to our scan to run default Nmap scripts and to perform service enumeration:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">nmap -sC -sV 192.168.195.132</span></p><p class="c16"><span class="c15 c4">Nmap scan report for 192.168.195.132</span></p><p class="c16"><span class="c15 c4">Host is up (0.00047s latency).</span></p><p class="c16"><span class="c15 c4">Not shown: 999 closed ports</span></p><p class="c16"><span class="c15 c4">PORT &nbsp; &nbsp; STATE SERVICE VERSION</span></p><p class="c16"><span class="c15 c4">3000/tcp open &nbsp;ppp?</span></p><p class="c16"><span class="c15 c4">| fingerprint-strings:</span></p><p class="c16"><span class="c15 c4">| &nbsp; DNSStatusRequestTCP, DNSVersionBindReqTCP, Help, NCP, RPCCheck, RTSPRequest:</span></p><p class="c16"><span class="c15 c4">| &nbsp; &nbsp; HTTP/1.1 400 Bad Request</span></p><p class="c16"><span class="c15 c4">| &nbsp; &nbsp; Connection: close</span></p><p class="c16"><span class="c15 c4">| &nbsp; GetRequest:</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;HTTP/1.1 200 OK</span></p><p class="c16"><span class="c15 c4">--snip--</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;Copyright (c) Bjoern Kimminich.</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;SPDX-License-Identifier: MIT</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;&lt;!doctype html&gt;</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;&lt;html lang=&quot;en&quot;&gt;</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;&lt;head&gt;</span></p><p class="c16"><span class="c15 c4">&nbsp; &nbsp; &nbsp;&lt;meta charset=&quot;utf-8&quot;&gt;</span></p><p class="c40"><span class="c15">&nbsp; &nbsp; &nbsp;&lt;title&gt;</span><span class="c34 c39">OWASP Juice Shop</span><span class="c15 c4">&lt;/title&gt;</span></p><p class="c3 c7"><span class="c2">By running this command, we learn that HTTP is running over port 3000. We&rsquo;ve found a web app titled &ldquo;OWASP Juice Shop.&rdquo; Now we should be able to use a web browser to access Juice Shop by navigating to the URL (see </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-5&amp;sa=D&amp;source=editors&amp;ust=1681144438840451&amp;usg=AOvVaw1xg9jGCs6x-P1pGq-fM88P">Figure 5-5</a></span><span class="c2">). In my case, the URL is </span><span class="c2 c9">http://192.168.195.132:3000</span><span class="c2 c4">.</span></p><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 610.67px;"><img alt="Screenshot of the OWASP Juice Shop welcome page" src="images/image3.png" style="width: 624.00px; height: 610.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25"><span class="c24 c9 c8">Figure 5-5</span><span class="c20 c12 c9 c8">: OWASP Juice Shop</span></p><p class="c3 c7"><span class="c2 c4">At this point, you can explore the web application with your web browser, see its various features, and find the fine juices of the Juice Shop. In general, click things and pay attention to the URLs these clicks generate for signs of APIs at work. A typical first step after exploring the web application is to test it for vulnerabilities. Use the following Nikto command to scan the web app in your lab:</span></p><p class="c16"><span class="c15">$ </span><span class="c34 c39">nikto -h http://192.168.195.132:3000</span></p><p class="c16"><span class="c15 c4">---------------------------------------------------------------------------</span></p><p class="c16"><span class="c15 c4">+ Target IP: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.195.132</span></p><p class="c16"><span class="c15 c4">+ Target Hostname: &nbsp; &nbsp;192.168.195.132</span></p><p class="c16"><span class="c15 c4">+ Target Port: &nbsp; &nbsp; &nbsp; &nbsp;3000</span></p><p class="c16"><span class="c15 c4">---------------------------------------------------------------------------</span></p><p class="c16"><span class="c15 c4">+ Server: No banner retrieved</span></p><p class="c16"><span class="c15 c4">+ Retrieved access-control-allow-origin header: *</span></p><p class="c16"><span class="c15 c4">+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS</span></p><p class="c16"><span class="c15 c4">+ Uncommon header &#39;feature-policy&#39; found, with contents: payment &#39;self&#39;</span></p><p class="c16"><span class="c15 c4">+ No CGI Directories found (use &#39;-C all&#39; to force check all possible dirs)</span></p><p class="c16"><span class="c15 c4">+ Entry &#39;/ftp/&#39; in robots.txt returned a non-forbidden or redirect HTTP code (200)</span></p><p class="c40"><span class="c15 c4">+ &quot;robots.txt&quot; contains 1 entry which should be manually viewed.</span></p><p class="c3 c7"><span class="c2">Nikto highlights some juicy information, such as the </span><span class="c2 c9">robots.txt</span><span class="c2 c4">&nbsp;file and a valid entry for FTP. However, nothing here reveals that an API is at work.</span></p><p class="c3 c7"><span class="c2">Since we know that APIs operate beyond the GUI, it makes sense to begin capturing web traffic by proxying our traffic through Burp Suite. Make sure to set FoxyProxy to your Burp Suite entry and confirm that Burp Suite has the Intercept option switched on (see </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-6&amp;sa=D&amp;source=editors&amp;ust=1681144438843013&amp;usg=AOvVaw2cMMiHlneVYbRgyoNyHNe1">Figure 5-6</a></span><span class="c2 c4">). Next, refresh the Juice Shop web page.</span></p><p class="c29"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 606.67px; height: 340.00px;"><img alt="Screenshot of an HTTP request in Burp Suite" src="images/image5.png" style="width: 606.67px; height: 340.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25"><span class="c24 c9 c8">Figure 5-6</span><span class="c12 c9 c8 c20">: An intercepted Juice Shop HTTP request</span></p><p class="c3 c7"><span class="c2">Once you&rsquo;ve intercepted a request with Burp Suite, you should see something similar to what&rsquo;s shown in </span><span class="c1"><a class="c26" href="https://www.google.com/url?q=https://learning.oreilly.com/library/view/hacking-apis/9781098130244/c05.xhtml%23figure5-6&amp;sa=D&amp;source=editors&amp;ust=1681144438843665&amp;usg=AOvVaw3MIX_U0RSXF028M_m66l2_">Figure 5-6</a></span><span class="c2">. However, still no APIs! Next, slowly click </span><span class="c17">Forward</span><span class="c2 c4">&nbsp;to send one automatically generated request after another to the web application and notice how the web browser&rsquo;s GUI slowly builds.</span></p><p class="c3 c7"><span class="c2 c4">Once you start forwarding requests, you should see the following, indicating API endpoints:</span></p><ol class="c32 lst-kix_8haqykk7gx6u-0 start" start="1"><li class="c18 c8 li-bullet-0"><span class="c11 c4">GET /rest/admin/application-configuration</span></li><li class="c18 c8 li-bullet-0"><span class="c11 c4">GET /api/Challenges/?name=Score%20Board</span></li><li class="c18 c8 li-bullet-0"><span class="c11 c4">GET /api/Quantitys/</span></li></ol><p class="c3 c7"><span class="c2 c4">Nice! This short lab demonstrated how you can search for a vulnerable machine in your local network environment. We performed some basic usage of the tools we set up in Chapter 4 to help us find one of the vulnerable applications and capture some interesting-looking API requests being sent beyond what we can normally see in the web browser&rsquo;s GUI.</span></p><p class="c16 c41"><span class="c4 c23"></span></p></body></html>